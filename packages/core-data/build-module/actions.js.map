{"version":3,"sources":["@wordpress/core-data/src/actions.js"],"names":["saveEntityRecord","castArray","find","receiveItems","receiveQueriedItems","getKindEntities","DEFAULT_ENTITY_KEY","apiFetch","receiveUserQuery","queryID","users","type","addEntities","entities","receiveEntityRecords","kind","name","records","query","invalidateCache","action","receiveThemeSupports","themeSupports","receiveEmbedPreview","url","preview","record","entity","key","recordId","path","baseURL","method","data","updatedRecord","undefined","receiveUploadPermissions","hasUploadPermissions","isAllowed","receiveUserPermission"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { castArray, find } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport {\n\treceiveItems,\n\treceiveQueriedItems,\n} from './queried-data';\nimport { getKindEntities, DEFAULT_ENTITY_KEY } from './entities';\nimport { apiFetch } from './controls';\n\n/**\n * Returns an action object used in signalling that authors have been received.\n *\n * @param {string}       queryID Query ID.\n * @param {Array|Object} users   Users received.\n *\n * @return {Object} Action object.\n */\nexport function receiveUserQuery( queryID, users ) {\n\treturn {\n\t\ttype: 'RECEIVE_USER_QUERY',\n\t\tusers: castArray( users ),\n\t\tqueryID,\n\t};\n}\n\n/**\n * Returns an action object used in adding new entities.\n *\n * @param {Array} entities  Entities received.\n *\n * @return {Object} Action object.\n */\nexport function addEntities( entities ) {\n\treturn {\n\t\ttype: 'ADD_ENTITIES',\n\t\tentities,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that entity records have been received.\n *\n * @param {string}       kind            Kind of the received entity.\n * @param {string}       name            Name of the received entity.\n * @param {Array|Object} records         Records received.\n * @param {?Object}      query           Query Object.\n * @param {?boolean}     invalidateCache Should invalidate query caches\n *\n * @return {Object} Action object.\n */\nexport function receiveEntityRecords( kind, name, records, query, invalidateCache = false ) {\n\tlet action;\n\tif ( query ) {\n\t\taction = receiveQueriedItems( records, query );\n\t} else {\n\t\taction = receiveItems( records );\n\t}\n\n\treturn {\n\t\t...action,\n\t\tkind,\n\t\tname,\n\t\tinvalidateCache,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the index has been received.\n *\n * @param {Object} themeSupports Theme support for the current theme.\n *\n * @return {Object} Action object.\n */\nexport function receiveThemeSupports( themeSupports ) {\n\treturn {\n\t\ttype: 'RECEIVE_THEME_SUPPORTS',\n\t\tthemeSupports,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the preview data for\n * a given URl has been received.\n *\n * @param {string}  url      URL to preview the embed for.\n * @param {Mixed}   preview  Preview data.\n *\n * @return {Object} Action object.\n */\nexport function receiveEmbedPreview( url, preview ) {\n\treturn {\n\t\ttype: 'RECEIVE_EMBED_PREVIEW',\n\t\turl,\n\t\tpreview,\n\t};\n}\n\n/**\n * Action triggered to save an entity record.\n *\n * @param {string} kind    Kind of the received entity.\n * @param {string} name    Name of the received entity.\n * @param {Object} record  Record to be saved.\n *\n * @return {Object} Updated record.\n */\nexport function* saveEntityRecord( kind, name, record ) {\n\tconst entities = yield getKindEntities( kind );\n\tconst entity = find( entities, { kind, name } );\n\tif ( ! entity ) {\n\t\treturn;\n\t}\n\tconst key = entity.key || DEFAULT_ENTITY_KEY;\n\tconst recordId = record[ key ];\n\tconst updatedRecord = yield apiFetch( {\n\t\tpath: `${ entity.baseURL }${ recordId ? '/' + recordId : '' }`,\n\t\tmethod: recordId ? 'PUT' : 'POST',\n\t\tdata: record,\n\t} );\n\tyield receiveEntityRecords( kind, name, updatedRecord, undefined, true );\n\n\treturn updatedRecord;\n}\n\n/**\n * Returns an action object used in signalling that Upload permissions have been received.\n *\n * @param {boolean} hasUploadPermissions Does the user have permission to upload files?\n *\n * @return {Object} Action object.\n */\nexport function receiveUploadPermissions( hasUploadPermissions ) {\n\treturn {\n\t\ttype: 'RECEIVE_USER_PERMISSION',\n\t\tkey: 'create/media',\n\t\tisAllowed: hasUploadPermissions,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the current user has\n * permission to perform an action on a REST resource.\n *\n * @param {string}  key       A key that represents the action and REST resource.\n * @param {boolean} isAllowed Whether or not the user can perform the action.\n *\n * @return {Object} Action object.\n */\nexport function receiveUserPermission( key, isAllowed ) {\n\treturn {\n\t\ttype: 'RECEIVE_USER_PERMISSION',\n\t\tkey,\n\t\tisAllowed,\n\t};\n}\n"]}