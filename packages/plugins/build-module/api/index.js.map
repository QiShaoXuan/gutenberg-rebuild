{"version":3,"sources":["@wordpress/plugins/src/api/index.js"],"names":["applyFilters","doAction","isFunction","plugins","registerPlugin","name","settings","console","error","test","render","icon","unregisterPlugin","oldPlugin","getPlugin","getPlugins","Object","values"],"mappings":";;;AAAA;;AAEA;;;AAGA,SAASA,YAAT,EAAuBC,QAAvB,QAAuC,kBAAvC;AAEA;;;;AAGA,SAASC,UAAT,QAA2B,QAA3B;AAEA;;;;;;AAKA,IAAMC,OAAO,GAAG,EAAhB;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA,OAAO,SAASC,cAAT,CAAyBC,IAAzB,EAA+BC,QAA/B,EAA0C;AAChD,MAAK,QAAOA,QAAP,MAAoB,QAAzB,EAAoC;AACnCC,IAAAA,OAAO,CAACC,KAAR,CACC,8BADD;AAGA,WAAO,IAAP;AACA;;AACD,MAAK,OAAOH,IAAP,KAAgB,QAArB,EAAgC;AAC/BE,IAAAA,OAAO,CAACC,KAAR,CACC,+BADD;AAGA,WAAO,IAAP;AACA;;AACD,MAAK,CAAE,oBAAoBC,IAApB,CAA0BJ,IAA1B,CAAP,EAA0C;AACzCE,IAAAA,OAAO,CAACC,KAAR,CACC,4HADD;AAGA,WAAO,IAAP;AACA;;AACD,MAAKL,OAAO,CAAEE,IAAF,CAAZ,EAAuB;AACtBE,IAAAA,OAAO,CAACC,KAAR,oBACaH,IADb;AAGA;;AAEDC,EAAAA,QAAQ,GAAGN,YAAY,CAAE,wBAAF,EAA4BM,QAA5B,EAAsCD,IAAtC,CAAvB;;AAEA,MAAK,CAAEH,UAAU,CAAEI,QAAQ,CAACI,MAAX,CAAjB,EAAuC;AACtCH,IAAAA,OAAO,CAACC,KAAR,CACC,uEADD;AAGA,WAAO,IAAP;AACA;;AAEDL,EAAAA,OAAO,CAAEE,IAAF,CAAP;AACCA,IAAAA,IAAI,EAAJA,IADD;AAECM,IAAAA,IAAI,EAAE;AAFP,KAGIL,QAHJ;AAMAL,EAAAA,QAAQ,CAAE,0BAAF,EAA8BK,QAA9B,EAAwCD,IAAxC,CAAR;AAEA,SAAOC,QAAP;AACA;AAED;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAO,SAASM,gBAAT,CAA2BP,IAA3B,EAAkC;AACxC,MAAK,CAAEF,OAAO,CAAEE,IAAF,CAAd,EAAyB;AACxBE,IAAAA,OAAO,CAACC,KAAR,CACC,aAAaH,IAAb,GAAoB,sBADrB;AAGA;AACA;;AACD,MAAMQ,SAAS,GAAGV,OAAO,CAAEE,IAAF,CAAzB;AACA,SAAOF,OAAO,CAAEE,IAAF,CAAd;AAEAJ,EAAAA,QAAQ,CAAE,4BAAF,EAAgCY,SAAhC,EAA2CR,IAA3C,CAAR;AAEA,SAAOQ,SAAP;AACA;AAED;;;;;;;;AAOA,OAAO,SAASC,SAAT,CAAoBT,IAApB,EAA2B;AACjC,SAAOF,OAAO,CAAEE,IAAF,CAAd;AACA;AAED;;;;;;AAKA,OAAO,SAASU,UAAT,GAAsB;AAC5B,SAAOC,MAAM,CAACC,MAAP,CAAed,OAAf,CAAP;AACA","sourcesContent":["/* eslint no-console: [ 'error', { allow: [ 'error' ] } ] */\n\n/**\n * WordPress dependencies\n */\nimport { applyFilters, doAction } from '@wordpress/hooks';\n\n/**\n * External dependencies\n */\nimport { isFunction } from 'lodash';\n\n/**\n * Plugin definitions keyed by plugin name.\n *\n * @type {Object.<string,WPPlugin>}\n */\nconst plugins = {};\n\n/**\n * Registers a plugin to the editor.\n *\n * @param {string}                    name            A string identifying the plugin. Must be unique across all registered plugins.\n * @param {Object}                    settings        The settings for this plugin.\n * @param {string|WPElement|Function} settings.icon   An icon to be shown in the UI. It can be a slug of the Dashicon,\n * or an element (or function returning an element) if you choose to render your own SVG.\n * @param {Function}                  settings.render A component containing the UI elements to be rendered.\n *\n * @example <caption>ES5</caption>\n * ```js\n * // Using ES5 syntax\n * var el = wp.element.createElement;\n * var Fragment = wp.element.Fragment;\n * var PluginSidebar = wp.editPost.PluginSidebar;\n * var PluginSidebarMoreMenuItem = wp.editPost.PluginSidebarMoreMenuItem;\n * var registerPlugin = wp.plugins.registerPlugin;\n *\n * function Component() {\n * \treturn el(\n * \t\tFragment,\n * \t\t{},\n * \t\tel(\n * \t\t\tPluginSidebarMoreMenuItem,\n * \t\t\t{\n * \t\t\t\ttarget: 'sidebar-name',\n * \t\t\t},\n * \t\t\t'My Sidebar'\n * \t\t),\n * \t\tel(\n * \t\t\tPluginSidebar,\n * \t\t\t{\n * \t\t\t\tname: 'sidebar-name',\n * \t\t\t\ttitle: 'My Sidebar',\n * \t\t\t},\n * \t\t\t'Content of the sidebar'\n * \t\t)\n * \t);\n * }\n * registerPlugin( 'plugin-name', {\n * \ticon: 'smiley',\n * \trender: Component,\n * } );\n * ```\n *\n * @example <caption>ESNext</caption>\n * ```js\n * // Using ESNext syntax\n * const { Fragment } = wp.element;\n * const { PluginSidebar, PluginSidebarMoreMenuItem } = wp.editPost;\n * const { registerPlugin } = wp.plugins;\n *\n * const Component = () => (\n * \t<Fragment>\n * \t\t<PluginSidebarMoreMenuItem\n * \t\t\ttarget=\"sidebar-name\"\n * \t\t>\n * \t\t\tMy Sidebar\n * \t\t</PluginSidebarMoreMenuItem>\n * \t\t<PluginSidebar\n * \t\t\tname=\"sidebar-name\"\n * \t\t\ttitle=\"My Sidebar\"\n * \t\t>\n * \t\t\tContent of the sidebar\n * \t\t</PluginSidebar>\n * \t</Fragment>\n * );\n *\n * registerPlugin( 'plugin-name', {\n * \ticon: 'smiley',\n * \trender: Component,\n * } );\n * ```\n *\n * @return {Object} The final plugin settings object.\n */\nexport function registerPlugin( name, settings ) {\n\tif ( typeof settings !== 'object' ) {\n\t\tconsole.error(\n\t\t\t'No settings object provided!'\n\t\t);\n\t\treturn null;\n\t}\n\tif ( typeof name !== 'string' ) {\n\t\tconsole.error(\n\t\t\t'Plugin names must be strings.'\n\t\t);\n\t\treturn null;\n\t}\n\tif ( ! /^[a-z][a-z0-9-]*$/.test( name ) ) {\n\t\tconsole.error(\n\t\t\t'Plugin names must include only lowercase alphanumeric characters or dashes, and start with a letter. Example: \"my-plugin\".'\n\t\t);\n\t\treturn null;\n\t}\n\tif ( plugins[ name ] ) {\n\t\tconsole.error(\n\t\t\t`Plugin \"${ name }\" is already registered.`\n\t\t);\n\t}\n\n\tsettings = applyFilters( 'plugins.registerPlugin', settings, name );\n\n\tif ( ! isFunction( settings.render ) ) {\n\t\tconsole.error(\n\t\t\t'The \"render\" property must be specified and must be a valid function.'\n\t\t);\n\t\treturn null;\n\t}\n\n\tplugins[ name ] = {\n\t\tname,\n\t\ticon: 'admin-plugins',\n\t\t...settings,\n\t};\n\n\tdoAction( 'plugins.pluginRegistered', settings, name );\n\n\treturn settings;\n}\n\n/**\n * Unregisters a plugin by name.\n *\n * @param {string} name Plugin name.\n *\n * @example <caption>ES5</caption>\n * ```js\n * // Using ES5 syntax\n * var unregisterPlugin = wp.plugins.unregisterPlugin;\n *\n * unregisterPlugin( 'plugin-name' );\n * ```\n *\n * @example <caption>ESNext</caption>\n * ```js\n * // Using ESNext syntax\n * const { unregisterPlugin } = wp.plugins;\n *\n * unregisterPlugin( 'plugin-name' );\n * ```\n *\n * @return {?WPPlugin} The previous plugin settings object, if it has been\n *                     successfully unregistered; otherwise `undefined`.\n */\nexport function unregisterPlugin( name ) {\n\tif ( ! plugins[ name ] ) {\n\t\tconsole.error(\n\t\t\t'Plugin \"' + name + '\" is not registered.'\n\t\t);\n\t\treturn;\n\t}\n\tconst oldPlugin = plugins[ name ];\n\tdelete plugins[ name ];\n\n\tdoAction( 'plugins.pluginUnregistered', oldPlugin, name );\n\n\treturn oldPlugin;\n}\n\n/**\n * Returns a registered plugin settings.\n *\n * @param {string} name Plugin name.\n *\n * @return {?Object} Plugin setting.\n */\nexport function getPlugin( name ) {\n\treturn plugins[ name ];\n}\n\n/**\n * Returns all registered plugins.\n *\n * @return {Array} Plugin settings.\n */\nexport function getPlugins() {\n\treturn Object.values( plugins );\n}\n"]}