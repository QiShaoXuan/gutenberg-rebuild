{"version":3,"sources":["@wordpress/jest-console/src/matchers.js"],"names":["createToBeCalledMatcher","matcherName","methodName","received","spy","calls","mock","pass","length","message","getMockName","map","printReceived","assertionsNumber","createToBeCalledWithMatcher","expected","objects","expect","extend","supportedMatchers","result","matcherNameWith"],"mappings":";;;;;;;;AAGA;;AACA;;AAKA;;AATA;;;;AAMA;;;AAKA,IAAMA,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAEC,WAAF,EAAeC,UAAf;AAAA,SAC/B,UAAEC,QAAF,EAAgB;AACf,QAAMC,GAAG,GAAGD,QAAQ,CAAED,UAAF,CAApB;AACA,QAAMG,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACA,QAAME,IAAI,GAAGF,KAAK,CAACG,MAAN,GAAe,CAA5B;AACA,QAAMC,OAAO,GAAGF,IAAI,GACnB;AAAA,aACC,iDAAqBN,WAArB,GAAqCG,GAAG,CAACM,WAAJ,EAArC,IACA,MADA,GAEA,mEAFA,GAGAL,KAAK,CAACM,GAAN,CAAWC,+BAAX,CAJD;AAAA,KADmB,GAMnB;AAAA,aACC,mCAAaX,WAAb,EAA0BG,GAAG,CAACM,WAAJ,EAA1B,IACA,MADA,GAEA,sCAHD;AAAA,KAND;AAWAN,IAAAA,GAAG,CAACS,gBAAJ,IAAwB,CAAxB;AAEA,WAAO;AACNJ,MAAAA,OAAO,EAAPA,OADM;AAENF,MAAAA,IAAI,EAAJA;AAFM,KAAP;AAIA,GAtB8B;AAAA,CAAhC;;AAwBA,IAAMO,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAEb,WAAF,EAAeC,UAAf;AAAA,SACnC,UAAEC,QAAF,EAA6B;AAAA,sCAAdY,QAAc;AAAdA,MAAAA,QAAc;AAAA;;AAC5B,QAAMX,GAAG,GAAGD,QAAQ,CAAED,UAAF,CAApB;AACA,QAAMG,KAAK,GAAGD,GAAG,CAACE,IAAJ,CAASD,KAAvB;AACA,QAAME,IAAI,GAAG,kBACZF,KADY,EAEZ,UAAEW,OAAF;AAAA,aAAe,qBAASA,OAAT,EAAkBD,QAAlB,CAAf;AAAA,KAFY,CAAb;AAIA,QAAMN,OAAO,GAAGF,IAAI,GACnB;AAAA,aACC,iDAAqBN,WAArB,GAAqCG,GAAG,CAACM,WAAJ,EAArC,IACA,MADA,GAEA,iDAFA,GAGA,qCAAeK,QAAf,CAJD;AAAA,KADmB,GAMnB;AAAA,aACC,mCAAad,WAAb,EAA0BG,GAAG,CAACM,WAAJ,EAA1B,IACA,MADA,GAEA,6CAFA,GAGA,qCAAeK,QAAf,CAHA,GAG4B,IAH5B,GAIA,2BAJA,GAKAV,KAAK,CAACM,GAAN,CAAWC,+BAAX,CAND;AAAA,KAND;AAcAR,IAAAA,GAAG,CAACS,gBAAJ,IAAwB,CAAxB;AAEA,WAAO;AACNJ,MAAAA,OAAO,EAAPA,OADM;AAENF,MAAAA,IAAI,EAAJA;AAFM,KAAP;AAIA,GA5BkC;AAAA,CAApC;;AA8BAU,MAAM,CAACC,MAAP,CACC,oBAAQC,0BAAR,EAA2B,UAAEC,MAAF,EAAUnB,WAAV,EAAuBC,UAAvB,EAAuC;AAAA;;AACjE,MAAMmB,eAAe,aAAOpB,WAAP,SAArB;AAEA,yCACImB,MADJ,sEAEGnB,WAFH,EAEkBD,uBAAuB,YAAOC,WAAP,GAAuBC,UAAvB,CAFzC,iDAGGmB,eAHH,EAGsBP,2BAA2B,YAAOO,eAAP,GAA2BnB,UAA3B,CAHjD;AAKA,CARD,EAQG,EARH,CADD","sourcesContent":["/**\n * External dependencies\n */\nimport { matcherHint, printExpected, printReceived } from 'jest-matcher-utils';\nimport { isEqual, reduce, some } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport supportedMatchers from './supported-matchers';\n\nconst createToBeCalledMatcher = ( matcherName, methodName ) =>\n\t( received ) => {\n\t\tconst spy = received[ methodName ];\n\t\tconst calls = spy.mock.calls;\n\t\tconst pass = calls.length > 0;\n\t\tconst message = pass ?\n\t\t\t() =>\n\t\t\t\tmatcherHint( `.not${ matcherName }`, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function not to be called but it was called with:\\n' +\n\t\t\t\tcalls.map( printReceived ) :\n\t\t\t() =>\n\t\t\t\tmatcherHint( matcherName, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function to be called.';\n\n\t\tspy.assertionsNumber += 1;\n\n\t\treturn {\n\t\t\tmessage,\n\t\t\tpass,\n\t\t};\n\t};\n\nconst createToBeCalledWithMatcher = ( matcherName, methodName ) =>\n\t( received, ...expected ) => {\n\t\tconst spy = received[ methodName ];\n\t\tconst calls = spy.mock.calls;\n\t\tconst pass = some(\n\t\t\tcalls,\n\t\t\t( objects ) => isEqual( objects, expected )\n\t\t);\n\t\tconst message = pass ?\n\t\t\t() =>\n\t\t\t\tmatcherHint( `.not${ matcherName }`, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function not to be called with:\\n' +\n\t\t\t\tprintExpected( expected ) :\n\t\t\t() =>\n\t\t\t\tmatcherHint( matcherName, spy.getMockName() ) +\n\t\t\t\t'\\n\\n' +\n\t\t\t\t'Expected mock function to be called with:\\n' +\n\t\t\t\tprintExpected( expected ) + '\\n' +\n\t\t\t\t'but it was called with:\\n' +\n\t\t\t\tcalls.map( printReceived );\n\n\t\tspy.assertionsNumber += 1;\n\n\t\treturn {\n\t\t\tmessage,\n\t\t\tpass,\n\t\t};\n\t};\n\nexpect.extend(\n\treduce( supportedMatchers, ( result, matcherName, methodName ) => {\n\t\tconst matcherNameWith = `${ matcherName }With`;\n\n\t\treturn {\n\t\t\t...result,\n\t\t\t[ matcherName ]: createToBeCalledMatcher( `.${ matcherName }`, methodName ),\n\t\t\t[ matcherNameWith ]: createToBeCalledWithMatcher( `.${ matcherNameWith }`, methodName ),\n\t\t};\n\t}, {} )\n);\n"]}