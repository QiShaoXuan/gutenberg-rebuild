{"version":3,"sources":["@wordpress/block-library/src/tag-cloud/edit.js"],"names":["TagCloudEdit","arguments","state","editing","props","attributes","taxonomy","setTaxonomy","bind","toggleShowTagCounts","taxonomies","selectOption","label","value","taxonomyOptions","slug","name","setAttributes","showTagCounts","getTaxonomyOptions","inspectorControls","Component","select","getTaxonomies"],"mappings":";;;;;;;;;AAQA;;;;;;;;;;;;;;;;AALA;;AAMA;;AAMA;;AACA;;AACA;;AAjBA;;;;AAKA;;;IAcMA,Y;;;;;AACL,0BAAc;AAAA;;AAAA;AACb,mHAAUC,SAAV;AAEA,UAAKC,KAAL,GAAa;AACZC,MAAAA,OAAO,EAAE,CAAE,MAAKC,KAAL,CAAWC,UAAX,CAAsBC;AADrB,KAAb;AAIA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,mFAAnB;AACA,UAAKC,mBAAL,GAA2B,MAAKA,mBAAL,CAAyBD,IAAzB,mFAA3B;AARa;AASb;;;;yCAEoB;AACpB,UAAME,UAAU,GAAG,oBAAQ,KAAKN,KAAL,CAAWM,UAAnB,EAA+B,YAA/B,CAAnB;AACA,UAAMC,YAAY,GAAG;AACpBC,QAAAA,KAAK,EAAE,cAAI,YAAJ,CADa;AAEpBC,QAAAA,KAAK,EAAE;AAFa,OAArB;AAIA,UAAMC,eAAe,GAAG,iBAAKJ,UAAL,EAAiB,UAAEJ,QAAF,EAAgB;AACxD,eAAO;AACNO,UAAAA,KAAK,EAAEP,QAAQ,CAACS,IADV;AAENH,UAAAA,KAAK,EAAEN,QAAQ,CAACU;AAFV,SAAP;AAIA,OALuB,CAAxB;AAOA,cAASL,YAAT,0CAA0BG,eAA1B;AACA;;;gCAEYR,Q,EAAW;AAAA,UACfW,aADe,GACG,KAAKb,KADR,CACfa,aADe;AAGvBA,MAAAA,aAAa,CAAE;AAAEX,QAAAA,QAAQ,EAARA;AAAF,OAAF,CAAb;AACA;;;0CAEqB;AAAA,wBACiB,KAAKF,KADtB;AAAA,UACbC,UADa,eACbA,UADa;AAAA,UACDY,aADC,eACDA,aADC;AAAA,UAEbC,aAFa,GAEKb,UAFL,CAEba,aAFa;AAIrBD,MAAAA,aAAa,CAAE;AAAEC,QAAAA,aAAa,EAAE,CAAEA;AAAnB,OAAF,CAAb;AACA;;;6BAEQ;AAAA,UACAb,UADA,GACe,KAAKD,KADpB,CACAC,UADA;AAAA,UAEAC,QAFA,GAE4BD,UAF5B,CAEAC,QAFA;AAAA,UAEUY,aAFV,GAE4Bb,UAF5B,CAEUa,aAFV;AAGR,UAAMJ,eAAe,GAAG,KAAKK,kBAAL,EAAxB;AAEA,UAAMC,iBAAiB,GACtB,4BAAC,8BAAD,QACC,4BAAC,qBAAD;AAAW,QAAA,KAAK,EAAG,cAAI,oBAAJ;AAAnB,SACC,4BAAC,yBAAD;AACC,QAAA,KAAK,EAAG,cAAI,UAAJ,CADT;AAEC,QAAA,OAAO,EAAGN,eAFX;AAGC,QAAA,KAAK,EAAGR,QAHT;AAIC,QAAA,QAAQ,EAAG,KAAKC;AAJjB,QADD,EAOC,4BAAC,yBAAD;AACC,QAAA,KAAK,EAAG,cAAI,kBAAJ,CADT;AAEC,QAAA,OAAO,EAAGW,aAFX;AAGC,QAAA,QAAQ,EAAG,KAAKT;AAHjB,QAPD,CADD,CADD;AAkBA,aACC,4BAAC,iBAAD,QACGW,iBADH,EAEC,4BAAC,4BAAD;AACC,QAAA,GAAG,EAAC,WADL;AAEC,QAAA,KAAK,EAAC,gBAFP;AAGC,QAAA,UAAU,EAAGf;AAHd,QAFD,CADD;AAUA;;;EA1EyBgB,kB;;eA6EZ,sBAAY,UAAEC,MAAF,EAAc;AACxC,SAAO;AACNZ,IAAAA,UAAU,EAAEY,MAAM,CAAE,MAAF,CAAN,CAAiBC,aAAjB;AADN,GAAP;AAGA,CAJc,EAIVvB,YAJU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { map, filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component, Fragment } from '@wordpress/element';\nimport {\n\tPanelBody,\n\tToggleControl,\n\tSelectControl,\n\tServerSideRender,\n} from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/block-editor';\n\nclass TagCloudEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\tediting: ! this.props.attributes.taxonomy,\n\t\t};\n\n\t\tthis.setTaxonomy = this.setTaxonomy.bind( this );\n\t\tthis.toggleShowTagCounts = this.toggleShowTagCounts.bind( this );\n\t}\n\n\tgetTaxonomyOptions() {\n\t\tconst taxonomies = filter( this.props.taxonomies, 'show_cloud' );\n\t\tconst selectOption = {\n\t\t\tlabel: __( '- Select -' ),\n\t\t\tvalue: '',\n\t\t};\n\t\tconst taxonomyOptions = map( taxonomies, ( taxonomy ) => {\n\t\t\treturn {\n\t\t\t\tvalue: taxonomy.slug,\n\t\t\t\tlabel: taxonomy.name,\n\t\t\t};\n\t\t} );\n\n\t\treturn [ selectOption, ...taxonomyOptions ];\n\t}\n\n\tsetTaxonomy( taxonomy ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( { taxonomy } );\n\t}\n\n\ttoggleShowTagCounts() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { showTagCounts } = attributes;\n\n\t\tsetAttributes( { showTagCounts: ! showTagCounts } );\n\t}\n\n\trender() {\n\t\tconst { attributes } = this.props;\n\t\tconst { taxonomy, showTagCounts } = attributes;\n\t\tconst taxonomyOptions = this.getTaxonomyOptions();\n\n\t\tconst inspectorControls = (\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Tag Cloud Settings' ) }>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Taxonomy' ) }\n\t\t\t\t\t\toptions={ taxonomyOptions }\n\t\t\t\t\t\tvalue={ taxonomy }\n\t\t\t\t\t\tonChange={ this.setTaxonomy }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show post counts' ) }\n\t\t\t\t\t\tchecked={ showTagCounts }\n\t\t\t\t\t\tonChange={ this.toggleShowTagCounts }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ inspectorControls }\n\t\t\t\t<ServerSideRender\n\t\t\t\t\tkey=\"tag-cloud\"\n\t\t\t\t\tblock=\"core/tag-cloud\"\n\t\t\t\t\tattributes={ attributes }\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\ttaxonomies: select( 'core' ).getTaxonomies(),\n\t};\n} )( TagCloudEdit );\n"]}