{"version":3,"sources":["@wordpress/block-library/src/pullquote/edit.js"],"names":["SOLID_COLOR_STYLE_NAME","SOLID_COLOR_CLASS","PullQuoteEdit","props","wasTextColorAutomaticallyComputed","pullQuoteMainColorSetter","bind","pullQuoteTextColorSetter","colorValue","colorUtils","textColor","setTextColor","setMainColor","className","isSolidColorStyle","needTextColor","color","shouldSetTextColor","getMostReadableColor","attributes","mainColor","setAttributes","isSelected","value","citation","figureStyle","backgroundColor","borderColor","blockquoteStyle","blockquoteClasses","class","undefined","nextValue","RichText","isEmpty","nextCitation","onChange","label","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tComponent,\n\tFragment,\n} from '@wordpress/element';\nimport {\n\tRichText,\n\tContrastChecker,\n\tInspectorControls,\n\twithColors,\n\tPanelColorSettings,\n} from '@wordpress/block-editor';\n\nexport const SOLID_COLOR_STYLE_NAME = 'solid-color';\nexport const SOLID_COLOR_CLASS = `is-style-${ SOLID_COLOR_STYLE_NAME }`;\n\nclass PullQuoteEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t\tthis.pullQuoteMainColorSetter = this.pullQuoteMainColorSetter.bind( this );\n\t\tthis.pullQuoteTextColorSetter = this.pullQuoteTextColorSetter.bind( this );\n\t}\n\n\tpullQuoteMainColorSetter( colorValue ) {\n\t\tconst { colorUtils, textColor, setTextColor, setMainColor, className } = this.props;\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst needTextColor = ! textColor.color || this.wasTextColorAutomaticallyComputed;\n\t\tconst shouldSetTextColor = isSolidColorStyle && needTextColor && colorValue;\n\n\t\tsetMainColor( colorValue );\n\t\tif ( shouldSetTextColor ) {\n\t\t\tthis.wasTextColorAutomaticallyComputed = true;\n\t\t\tsetTextColor( colorUtils.getMostReadableColor( colorValue ) );\n\t\t}\n\t}\n\n\tpullQuoteTextColorSetter( colorValue ) {\n\t\tconst { setTextColor } = this.props;\n\t\tsetTextColor( colorValue );\n\t\tthis.wasTextColorAutomaticallyComputed = false;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tmainColor,\n\t\t\ttextColor,\n\t\t\tsetAttributes,\n\t\t\tisSelected,\n\t\t\tclassName,\n\t\t} = this.props;\n\n\t\tconst { value, citation } = attributes;\n\n\t\tconst isSolidColorStyle = includes( className, SOLID_COLOR_CLASS );\n\t\tconst figureStyle = isSolidColorStyle ?\n\t\t\t{ backgroundColor: mainColor.color } :\n\t\t\t{ borderColor: mainColor.color };\n\t\tconst blockquoteStyle = {\n\t\t\tcolor: textColor.color,\n\t\t};\n\t\tconst blockquoteClasses = textColor.color ? classnames( 'has-text-color', {\n\t\t\t[ textColor.class ]: textColor.class,\n\t\t} ) : undefined;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<figure style={ figureStyle } className={ classnames(\n\t\t\t\t\tclassName, {\n\t\t\t\t\t\t[ mainColor.class ]: isSolidColorStyle && mainColor.class,\n\t\t\t\t\t} ) }>\n\t\t\t\t\t<blockquote style={ blockquoteStyle } className={ blockquoteClasses }>\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t( nextValue ) => setAttributes( {\n\t\t\t\t\t\t\t\t\tvalue: nextValue,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t// translators: placeholder text used for the quote\n\t\t\t\t\t\t\t\t__( 'Write quote…' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twrapperClassName=\"block-library-pullquote__content\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ( ! RichText.isEmpty( citation ) || isSelected ) && (\n\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\tvalue={ citation }\n\t\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\t\t// translators: placeholder text used for the citation\n\t\t\t\t\t\t\t\t\t__( 'Write citation…' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t( nextCitation ) => setAttributes( {\n\t\t\t\t\t\t\t\t\t\tcitation: nextCitation,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName=\"wp-block-pullquote__citation\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</blockquote>\n\t\t\t\t</figure>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\ttitle={ __( 'Color Settings' ) }\n\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: mainColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteMainColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Main Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\tonChange: this.pullQuoteTextColorSetter,\n\t\t\t\t\t\t\t\tlabel: __( 'Text Color' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ isSolidColorStyle && (\n\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\ttextColor: textColor.color,\n\t\t\t\t\t\t\t\t\tbackgroundColor: mainColor.color,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tisLargeText={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t</InspectorControls>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default withColors( { mainColor: 'background-color', textColor: 'color' } )(\n\tPullQuoteEdit\n);\n"]}