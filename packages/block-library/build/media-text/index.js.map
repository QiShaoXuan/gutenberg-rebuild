{"version":3,"sources":["@wordpress/block-library/src/media-text/index.js"],"names":["DEFAULT_MEDIA_WIDTH","name","blockAttributes","align","type","default","backgroundColor","customBackgroundColor","mediaAlt","source","selector","attribute","mediaPosition","mediaId","mediaUrl","mediaType","mediaWidth","isStackedOnMobile","verticalAlignment","settings","title","description","icon","category","keywords","attributes","supports","html","transforms","from","blocks","transform","alt","url","id","src","to","isMatch","edit","save","mediaTypeRenders","image","video","backgroundClass","className","gridTemplateColumns","style","undefined","noop","deprecated"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tInnerBlocks,\n\tgetColorClassName,\n} from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\n\nconst DEFAULT_MEDIA_WIDTH = 50;\n\nexport const name = 'core/media-text';\n\nconst blockAttributes = {\n\talign: {\n\t\ttype: 'string',\n\t\tdefault: 'wide',\n\t},\n\tbackgroundColor: {\n\t\ttype: 'string',\n\t},\n\tcustomBackgroundColor: {\n\t\ttype: 'string',\n\t},\n\tmediaAlt: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure img',\n\t\tattribute: 'alt',\n\t\tdefault: '',\n\t},\n\tmediaPosition: {\n\t\ttype: 'string',\n\t\tdefault: 'left',\n\t},\n\tmediaId: {\n\t\ttype: 'number',\n\t},\n\tmediaUrl: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure video,figure img',\n\t\tattribute: 'src',\n\t},\n\tmediaType: {\n\t\ttype: 'string',\n\t},\n\tmediaWidth: {\n\t\ttype: 'number',\n\t\tdefault: 50,\n\t},\n\tisStackedOnMobile: {\n\t\ttype: 'boolean',\n\t\tdefault: false,\n\t},\n\tverticalAlignment: {\n\t\ttype: 'string',\n\t},\n};\n\nexport const settings = {\n\ttitle: __( 'Media & Text' ),\n\n\tdescription: __( 'Set media and words side-by-side for a richer layout.' ),\n\n\ticon,\n\n\tcategory: 'layout',\n\n\tkeywords: [ __( 'image' ), __( 'video' ) ],\n\n\tattributes: blockAttributes,\n\n\tsupports: {\n\t\talign: [ 'wide', 'full' ],\n\t\thtml: false,\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( { alt, url, id } ) => (\n\t\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\t\tmediaAlt: alt,\n\t\t\t\t\t\tmediaId: id,\n\t\t\t\t\t\tmediaUrl: url,\n\t\t\t\t\t\tmediaType: 'image',\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/video' ],\n\t\t\t\ttransform: ( { src, id } ) => (\n\t\t\t\t\tcreateBlock( 'core/media-text', {\n\t\t\t\t\t\tmediaId: id,\n\t\t\t\t\t\tmediaUrl: src,\n\t\t\t\t\t\tmediaType: 'video',\n\t\t\t\t\t} )\n\t\t\t\t),\n\t\t\t},\n\t\t],\n\t\tto: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\t\treturn ! mediaUrl || mediaType === 'image';\n\t\t\t\t},\n\t\t\t\ttransform: ( { mediaAlt, mediaId, mediaUrl } ) => {\n\t\t\t\t\treturn createBlock( 'core/image', {\n\t\t\t\t\t\talt: mediaAlt,\n\t\t\t\t\t\tid: mediaId,\n\t\t\t\t\t\turl: mediaUrl,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/video' ],\n\t\t\t\tisMatch: ( { mediaType, mediaUrl } ) => {\n\t\t\t\t\treturn ! mediaUrl || mediaType === 'video';\n\t\t\t\t},\n\t\t\t\ttransform: ( { mediaId, mediaUrl } ) => {\n\t\t\t\t\treturn createBlock( 'core/video', {\n\t\t\t\t\t\tid: mediaId,\n\t\t\t\t\t\tsrc: mediaUrl,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\tbackgroundColor,\n\t\t\tcustomBackgroundColor,\n\t\t\tisStackedOnMobile,\n\t\t\tmediaAlt,\n\t\t\tmediaPosition,\n\t\t\tmediaType,\n\t\t\tmediaUrl,\n\t\t\tmediaWidth,\n\t\t\tmediaId,\n\t\t\tverticalAlignment,\n\t\t} = attributes;\n\t\tconst mediaTypeRenders = {\n\t\t\timage: () => <img src={ mediaUrl } alt={ mediaAlt } className={ ( mediaId && mediaType === 'image' ) ? `wp-image-${ mediaId }` : null } />,\n\t\t\tvideo: () => <video controls src={ mediaUrl } />,\n\t\t};\n\t\tconst backgroundClass = getColorClassName( 'background-color', backgroundColor );\n\t\tconst className = classnames( {\n\t\t\t'has-media-on-the-right': 'right' === mediaPosition,\n\t\t\t[ backgroundClass ]: backgroundClass,\n\t\t\t'is-stacked-on-mobile': isStackedOnMobile,\n\t\t\t[ `is-vertically-aligned-${ verticalAlignment }` ]: verticalAlignment,\n\t\t} );\n\n\t\tlet gridTemplateColumns;\n\t\tif ( mediaWidth !== DEFAULT_MEDIA_WIDTH ) {\n\t\t\tgridTemplateColumns = 'right' === mediaPosition ? `auto ${ mediaWidth }%` : `${ mediaWidth }% auto`;\n\t\t}\n\t\tconst style = {\n\t\t\tbackgroundColor: backgroundClass ? undefined : customBackgroundColor,\n\t\t\tgridTemplateColumns,\n\t\t};\n\t\treturn (\n\t\t\t<div className={ className } style={ style }>\n\t\t\t\t<figure className=\"wp-block-media-text__media\" >\n\t\t\t\t\t{ ( mediaTypeRenders[ mediaType ] || noop )() }\n\t\t\t\t</figure>\n\t\t\t\t<div className=\"wp-block-media-text__content\">\n\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst {\n\t\t\t\t\tbackgroundColor,\n\t\t\t\t\tcustomBackgroundColor,\n\t\t\t\t\tisStackedOnMobile,\n\t\t\t\t\tmediaAlt,\n\t\t\t\t\tmediaPosition,\n\t\t\t\t\tmediaType,\n\t\t\t\t\tmediaUrl,\n\t\t\t\t\tmediaWidth,\n\t\t\t\t} = attributes;\n\t\t\t\tconst mediaTypeRenders = {\n\t\t\t\t\timage: () => <img src={ mediaUrl } alt={ mediaAlt } />,\n\t\t\t\t\tvideo: () => <video controls src={ mediaUrl } />,\n\t\t\t\t};\n\t\t\t\tconst backgroundClass = getColorClassName( 'background-color', backgroundColor );\n\t\t\t\tconst className = classnames( {\n\t\t\t\t\t'has-media-on-the-right': 'right' === mediaPosition,\n\t\t\t\t\t[ backgroundClass ]: backgroundClass,\n\t\t\t\t\t'is-stacked-on-mobile': isStackedOnMobile,\n\t\t\t\t} );\n\n\t\t\t\tlet gridTemplateColumns;\n\t\t\t\tif ( mediaWidth !== DEFAULT_MEDIA_WIDTH ) {\n\t\t\t\t\tgridTemplateColumns = 'right' === mediaPosition ? `auto ${ mediaWidth }%` : `${ mediaWidth }% auto`;\n\t\t\t\t}\n\t\t\t\tconst style = {\n\t\t\t\t\tbackgroundColor: backgroundClass ? undefined : customBackgroundColor,\n\t\t\t\t\tgridTemplateColumns,\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ className } style={ style }>\n\t\t\t\t\t\t<figure className=\"wp-block-media-text__media\" >\n\t\t\t\t\t\t\t{ ( mediaTypeRenders[ mediaType ] || noop )() }\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t<div className=\"wp-block-media-text__content\">\n\t\t\t\t\t\t\t<InnerBlocks.Content />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n"]}