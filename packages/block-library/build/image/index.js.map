{"version":3,"sources":["@wordpress/block-library/src/image/index.js"],"names":["name","blockAttributes","url","type","source","selector","attribute","alt","default","caption","href","rel","linkClass","id","align","width","height","linkDestination","linkTarget","imageSchema","img","attributes","classes","schema","figure","require","children","a","figcaption","getFirstAnchorAttributeFormHTML","html","attributeName","document","implementation","createHTMLDocument","body","innerHTML","firstElementChild","nodeName","getAttribute","undefined","stripFirstImage","shortcode","content","nodeToRemove","querySelector","parentNode","removeChild","trim","settings","title","description","icon","category","keywords","transforms","from","isMatch","node","transform","className","alignMatches","exec","idMatches","Number","anchorElement","outerHTML","files","length","indexOf","file","block","tag","named","parseInt","replace","getEditWrapperProps","edit","save","image","RichText","isEmpty","deprecated","extraImageProps","figureStyle","maxWidth"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { createBlobURL } from '@wordpress/blob';\nimport {\n\tcreateBlock,\n\tgetBlockAttributes,\n\tgetPhrasingContentSchema,\n} from '@wordpress/blocks';\nimport { RichText } from '@wordpress/block-editor';\nimport { Fragment } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\n\nexport const name = 'core/image';\n\nconst blockAttributes = {\n\turl: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'img',\n\t\tattribute: 'src',\n\t},\n\talt: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'img',\n\t\tattribute: 'alt',\n\t\tdefault: '',\n\t},\n\tcaption: {\n\t\ttype: 'string',\n\t\tsource: 'html',\n\t\tselector: 'figcaption',\n\t},\n\thref: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure > a',\n\t\tattribute: 'href',\n\t},\n\trel: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure > a',\n\t\tattribute: 'rel',\n\t},\n\tlinkClass: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure > a',\n\t\tattribute: 'class',\n\t},\n\tid: {\n\t\ttype: 'number',\n\t},\n\talign: {\n\t\ttype: 'string',\n\t},\n\twidth: {\n\t\ttype: 'number',\n\t},\n\theight: {\n\t\ttype: 'number',\n\t},\n\tlinkDestination: {\n\t\ttype: 'string',\n\t\tdefault: 'none',\n\t},\n\tlinkTarget: {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: 'figure > a',\n\t\tattribute: 'target',\n\t},\n};\n\nconst imageSchema = {\n\timg: {\n\t\tattributes: [ 'src', 'alt' ],\n\t\tclasses: [ 'alignleft', 'aligncenter', 'alignright', 'alignnone', /^wp-image-\\d+$/ ],\n\t},\n};\n\nconst schema = {\n\tfigure: {\n\t\trequire: [ 'img' ],\n\t\tchildren: {\n\t\t\t...imageSchema,\n\t\t\ta: {\n\t\t\t\tattributes: [ 'href', 'rel', 'target' ],\n\t\t\t\tchildren: imageSchema,\n\t\t\t},\n\t\t\tfigcaption: {\n\t\t\t\tchildren: getPhrasingContentSchema(),\n\t\t\t},\n\t\t},\n\t},\n};\n\nfunction getFirstAnchorAttributeFormHTML( html, attributeName ) {\n\tconst { body } = document.implementation.createHTMLDocument( '' );\n\n\tbody.innerHTML = html;\n\n\tconst { firstElementChild } = body;\n\n\tif (\n\t\tfirstElementChild &&\n\t\tfirstElementChild.nodeName === 'A'\n\t) {\n\t\treturn firstElementChild.getAttribute( attributeName ) || undefined;\n\t}\n}\n\nexport function stripFirstImage( attributes, { shortcode } ) {\n\tconst { body } = document.implementation.createHTMLDocument( '' );\n\n\tbody.innerHTML = shortcode.content;\n\n\tlet nodeToRemove = body.querySelector( 'img' );\n\n\t// if an image has parents, find the topmost node to remove\n\twhile ( nodeToRemove && nodeToRemove.parentNode && nodeToRemove.parentNode !== body ) {\n\t\tnodeToRemove = nodeToRemove.parentNode;\n\t}\n\n\tif ( nodeToRemove ) {\n\t\tnodeToRemove.parentNode.removeChild( nodeToRemove );\n\t}\n\n\treturn body.innerHTML.trim();\n}\n\nexport const settings = {\n\ttitle: __( 'Image' ),\n\n\tdescription: __( 'Insert an image to make a visual statement.' ),\n\n\ticon,\n\n\tcategory: 'common',\n\n\tkeywords: [\n\t\t'img', // \"img\" is not translated as it is intended to reflect the HTML <img> tag.\n\t\t__( 'photo' ),\n\t],\n\n\tattributes: blockAttributes,\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'raw',\n\t\t\t\tisMatch: ( node ) => node.nodeName === 'FIGURE' && !! node.querySelector( 'img' ),\n\t\t\t\tschema,\n\t\t\t\ttransform: ( node ) => {\n\t\t\t\t\t// Search both figure and image classes. Alignment could be\n\t\t\t\t\t// set on either. ID is set on the image.\n\t\t\t\t\tconst className = node.className + ' ' + node.querySelector( 'img' ).className;\n\t\t\t\t\tconst alignMatches = /(?:^|\\s)align(left|center|right)(?:$|\\s)/.exec( className );\n\t\t\t\t\tconst align = alignMatches ? alignMatches[ 1 ] : undefined;\n\t\t\t\t\tconst idMatches = /(?:^|\\s)wp-image-(\\d+)(?:$|\\s)/.exec( className );\n\t\t\t\t\tconst id = idMatches ? Number( idMatches[ 1 ] ) : undefined;\n\t\t\t\t\tconst anchorElement = node.querySelector( 'a' );\n\t\t\t\t\tconst linkDestination = anchorElement && anchorElement.href ? 'custom' : undefined;\n\t\t\t\t\tconst href = anchorElement && anchorElement.href ? anchorElement.href : undefined;\n\t\t\t\t\tconst rel = anchorElement && anchorElement.rel ? anchorElement.rel : undefined;\n\t\t\t\t\tconst linkClass = anchorElement && anchorElement.className ? anchorElement.className : undefined;\n\t\t\t\t\tconst attributes = getBlockAttributes( 'core/image', node.outerHTML, { align, id, linkDestination, href, rel, linkClass } );\n\t\t\t\t\treturn createBlock( 'core/image', attributes );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'files',\n\t\t\t\tisMatch( files ) {\n\t\t\t\t\treturn files.length === 1 && files[ 0 ].type.indexOf( 'image/' ) === 0;\n\t\t\t\t},\n\t\t\t\ttransform( files ) {\n\t\t\t\t\tconst file = files[ 0 ];\n\t\t\t\t\t// We don't need to upload the media directly here\n\t\t\t\t\t// It's already done as part of the `componentDidMount`\n\t\t\t\t\t// int the image block\n\t\t\t\t\tconst block = createBlock( 'core/image', {\n\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn block;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'shortcode',\n\t\t\t\ttag: 'caption',\n\t\t\t\tattributes: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\t\tattribute: 'src',\n\t\t\t\t\t\tselector: 'img',\n\t\t\t\t\t},\n\t\t\t\t\talt: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tsource: 'attribute',\n\t\t\t\t\t\tattribute: 'alt',\n\t\t\t\t\t\tselector: 'img',\n\t\t\t\t\t},\n\t\t\t\t\tcaption: {\n\t\t\t\t\t\tshortcode: stripFirstImage,\n\t\t\t\t\t},\n\t\t\t\t\thref: {\n\t\t\t\t\t\tshortcode: ( attributes, { shortcode } ) => {\n\t\t\t\t\t\t\treturn getFirstAnchorAttributeFormHTML( shortcode.content, 'href' );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\trel: {\n\t\t\t\t\t\tshortcode: ( attributes, { shortcode } ) => {\n\t\t\t\t\t\t\treturn getFirstAnchorAttributeFormHTML( shortcode.content, 'rel' );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlinkClass: {\n\t\t\t\t\t\tshortcode: ( attributes, { shortcode } ) => {\n\t\t\t\t\t\t\treturn getFirstAnchorAttributeFormHTML( shortcode.content, 'class' );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tshortcode: ( { named: { id } } ) => {\n\t\t\t\t\t\t\tif ( ! id ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn parseInt( id.replace( 'attachment_', '' ), 10 );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\talign: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { align = 'alignnone' } } ) => {\n\t\t\t\t\t\t\treturn align.replace( 'align', '' );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tgetEditWrapperProps( attributes ) {\n\t\tconst { align, width } = attributes;\n\t\tif ( 'left' === align || 'center' === align || 'right' === align || 'wide' === align || 'full' === align ) {\n\t\t\treturn { 'data-align': align, 'data-resized': !! width };\n\t\t}\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\turl,\n\t\t\talt,\n\t\t\tcaption,\n\t\t\talign,\n\t\t\thref,\n\t\t\trel,\n\t\t\tlinkClass,\n\t\t\twidth,\n\t\t\theight,\n\t\t\tid,\n\t\t\tlinkTarget,\n\t\t} = attributes;\n\n\t\tconst classes = classnames( {\n\t\t\t[ `align${ align }` ]: align,\n\t\t\t'is-resized': width || height,\n\t\t} );\n\n\t\tconst image = (\n\t\t\t<img\n\t\t\t\tsrc={ url }\n\t\t\t\talt={ alt }\n\t\t\t\tclassName={ id ? `wp-image-${ id }` : null }\n\t\t\t\twidth={ width }\n\t\t\t\theight={ height }\n\t\t\t/>\n\t\t);\n\n\t\tconst figure = (\n\t\t\t<Fragment>\n\t\t\t\t{ href ? (\n\t\t\t\t\t<a\n\t\t\t\t\t\tclassName={ linkClass }\n\t\t\t\t\t\thref={ href }\n\t\t\t\t\t\ttarget={ linkTarget }\n\t\t\t\t\t\trel={ rel }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ image }\n\t\t\t\t\t</a>\n\t\t\t\t) : image }\n\t\t\t\t{ ! RichText.isEmpty( caption ) && <RichText.Content tagName=\"figcaption\" value={ caption } /> }\n\t\t\t</Fragment>\n\t\t);\n\n\t\tif ( 'left' === align || 'right' === align || 'center' === align ) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<figure className={ classes }>\n\t\t\t\t\t\t{ figure }\n\t\t\t\t\t</figure>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<figure className={ classes }>\n\t\t\t\t{ figure }\n\t\t\t</figure>\n\t\t);\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { url, alt, caption, align, href, width, height, id } = attributes;\n\n\t\t\t\tconst classes = classnames( {\n\t\t\t\t\t[ `align${ align }` ]: align,\n\t\t\t\t\t'is-resized': width || height,\n\t\t\t\t} );\n\n\t\t\t\tconst image = (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\talt={ alt }\n\t\t\t\t\t\tclassName={ id ? `wp-image-${ id }` : null }\n\t\t\t\t\t\twidth={ width }\n\t\t\t\t\t\theight={ height }\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<figure className={ classes }>\n\t\t\t\t\t\t{ href ? <a href={ href }>{ image }</a> : image }\n\t\t\t\t\t\t{ ! RichText.isEmpty( caption ) && <RichText.Content tagName=\"figcaption\" value={ caption } /> }\n\t\t\t\t\t</figure>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { url, alt, caption, align, href, width, height, id } = attributes;\n\n\t\t\t\tconst image = (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={ url }\n\t\t\t\t\t\talt={ alt }\n\t\t\t\t\t\tclassName={ id ? `wp-image-${ id }` : null }\n\t\t\t\t\t\twidth={ width }\n\t\t\t\t\t\theight={ height }\n\t\t\t\t\t/>\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<figure className={ align ? `align${ align }` : null } >\n\t\t\t\t\t\t{ href ? <a href={ href }>{ image }</a> : image }\n\t\t\t\t\t\t{ ! RichText.isEmpty( caption ) && <RichText.Content tagName=\"figcaption\" value={ caption } /> }\n\t\t\t\t\t</figure>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { url, alt, caption, align, href, width, height } = attributes;\n\t\t\t\tconst extraImageProps = width || height ? { width, height } : {};\n\t\t\t\tconst image = <img src={ url } alt={ alt } { ...extraImageProps } />;\n\n\t\t\t\tlet figureStyle = {};\n\n\t\t\t\tif ( width ) {\n\t\t\t\t\tfigureStyle = { width };\n\t\t\t\t} else if ( align === 'left' || align === 'right' ) {\n\t\t\t\t\tfigureStyle = { maxWidth: '50%' };\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<figure className={ align ? `align${ align }` : null } style={ figureStyle }>\n\t\t\t\t\t\t{ href ? <a href={ href }>{ image }</a> : image }\n\t\t\t\t\t\t{ ! RichText.isEmpty( caption ) && <RichText.Content tagName=\"figcaption\" value={ caption } /> }\n\t\t\t\t\t</figure>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n"]}