{"version":3,"sources":["@wordpress/block-library/src/button/edit.js"],"names":["window","getComputedStyle","applyFallbackStyles","node","ownProps","textColor","backgroundColor","backgroundColorValue","color","textColorValue","textNode","querySelector","fallbackBackgroundColor","undefined","fallbackTextColor","ButtonEdit","arguments","nodeRef","bindRef","bind","props","attributes","setBackgroundColor","setTextColor","setAttributes","isSelected","className","text","url","title","value","class","onChange","label","isLargeText","event","preventDefault","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tComponent,\n\tFragment,\n} from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport {\n\tDashicon,\n\tIconButton,\n\twithFallbackStyles,\n} from '@wordpress/components';\nimport {\n\tURLInput,\n\tRichText,\n\tContrastChecker,\n\tInspectorControls,\n\twithColors,\n\tPanelColorSettings,\n} from '@wordpress/block-editor';\n\nconst { getComputedStyle } = window;\n\nconst applyFallbackStyles = withFallbackStyles( ( node, ownProps ) => {\n\tconst { textColor, backgroundColor } = ownProps;\n\tconst backgroundColorValue = backgroundColor && backgroundColor.color;\n\tconst textColorValue = textColor && textColor.color;\n\t//avoid the use of querySelector if textColor color is known and verify if node is available.\n\tconst textNode = ! textColorValue && node ? node.querySelector( '[contenteditable=\"true\"]' ) : null;\n\treturn {\n\t\tfallbackBackgroundColor: backgroundColorValue || ! node ? undefined : getComputedStyle( node ).backgroundColor,\n\t\tfallbackTextColor: textColorValue || ! textNode ? undefined : getComputedStyle( textNode ).color,\n\t};\n} );\n\nclass ButtonEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.nodeRef = null;\n\t\tthis.bindRef = this.bindRef.bind( this );\n\t}\n\n\tbindRef( node ) {\n\t\tif ( ! node ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.nodeRef = node;\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tattributes,\n\t\t\tbackgroundColor,\n\t\t\ttextColor,\n\t\t\tsetBackgroundColor,\n\t\t\tsetTextColor,\n\t\t\tfallbackBackgroundColor,\n\t\t\tfallbackTextColor,\n\t\t\tsetAttributes,\n\t\t\tisSelected,\n\t\t\tclassName,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\ttext,\n\t\t\turl,\n\t\t\ttitle,\n\t\t} = attributes;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className={ className } title={ title } ref={ this.bindRef }>\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tplaceholder={ __( 'Add textâ€¦' ) }\n\t\t\t\t\t\tvalue={ text }\n\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { text: value } ) }\n\t\t\t\t\t\tformattingControls={ [ 'bold', 'italic', 'strikethrough' ] }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'wp-block-button__link', {\n\t\t\t\t\t\t\t\t'has-background': backgroundColor.color,\n\t\t\t\t\t\t\t\t[ backgroundColor.class ]: backgroundColor.class,\n\t\t\t\t\t\t\t\t'has-text-color': textColor.color,\n\t\t\t\t\t\t\t\t[ textColor.class ]: textColor.class,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\tbackgroundColor: backgroundColor.color,\n\t\t\t\t\t\t\tcolor: textColor.color,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelColorSettings\n\t\t\t\t\t\t\ttitle={ __( 'Color Settings' ) }\n\t\t\t\t\t\t\tcolorSettings={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: backgroundColor.color,\n\t\t\t\t\t\t\t\t\tonChange: setBackgroundColor,\n\t\t\t\t\t\t\t\t\tlabel: __( 'Background Color' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: textColor.color,\n\t\t\t\t\t\t\t\t\tonChange: setTextColor,\n\t\t\t\t\t\t\t\t\tlabel: __( 'Text Color' ),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t// Text is considered large if font size is greater or equal to 18pt or 24px,\n\t\t\t\t\t\t\t\t\t// currently that's not the case for button.\n\t\t\t\t\t\t\t\t\tisLargeText: false,\n\t\t\t\t\t\t\t\t\ttextColor: textColor.color,\n\t\t\t\t\t\t\t\t\tbackgroundColor: backgroundColor.color,\n\t\t\t\t\t\t\t\t\tfallbackBackgroundColor,\n\t\t\t\t\t\t\t\t\tfallbackTextColor,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</PanelColorSettings>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t</div>\n\t\t\t\t{ isSelected && (\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"block-library-button__inline-link\"\n\t\t\t\t\t\tonSubmit={ ( event ) => event.preventDefault() }>\n\t\t\t\t\t\t<Dashicon icon=\"admin-links\" />\n\t\t\t\t\t\t<URLInput\n\t\t\t\t\t\t\tvalue={ url }\n\t\t\t\t\t\t\tonChange={ ( value ) => setAttributes( { url: value } ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton icon=\"editor-break\" label={ __( 'Apply' ) } type=\"submit\" />\n\t\t\t\t\t</form>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithColors( 'backgroundColor', { textColor: 'color' } ),\n\tapplyFallbackStyles,\n] )( ButtonEdit );\n"]}