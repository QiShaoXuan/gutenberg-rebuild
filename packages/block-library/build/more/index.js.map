{"version":3,"sources":["@wordpress/block-library/src/more/index.js"],"names":["name","settings","title","description","icon","category","supports","customClassName","className","html","multiple","attributes","customText","type","noTeaser","default","transforms","from","schema","isMatch","node","dataset","block","transform","attrs","edit","save","moreTag","noTeaserTag","join"],"mappings":";;;;;;;;;AASA;;AANA;;AAKA;;AAEA;;AAKA;;AACA;;AAhBA;;;;AAKA;;;;AAOA;;;AAMO,IAAMA,IAAI,GAAG,WAAb;;AAEA,IAAMC,QAAQ,GAAG;AACvBC,EAAAA,KAAK,EAAE,cAAI,MAAJ,EAAY,YAAZ,CADgB;AAGvBC,EAAAA,WAAW,EAAE,cAAI,+EAAJ,CAHU;AAKvBC,EAAAA,IAAI,EAAJA,aALuB;AAOvBC,EAAAA,QAAQ,EAAE,QAPa;AASvBC,EAAAA,QAAQ,EAAE;AACTC,IAAAA,eAAe,EAAE,KADR;AAETC,IAAAA,SAAS,EAAE,KAFF;AAGTC,IAAAA,IAAI,EAAE,KAHG;AAITC,IAAAA,QAAQ,EAAE;AAJD,GATa;AAgBvBC,EAAAA,UAAU,EAAE;AACXC,IAAAA,UAAU,EAAE;AACXC,MAAAA,IAAI,EAAE;AADK,KADD;AAIXC,IAAAA,QAAQ,EAAE;AACTD,MAAAA,IAAI,EAAE,SADG;AAETE,MAAAA,OAAO,EAAE;AAFA;AAJC,GAhBW;AA0BvBC,EAAAA,UAAU,EAAE;AACXC,IAAAA,IAAI,EAAE,CACL;AACCJ,MAAAA,IAAI,EAAE,KADP;AAECK,MAAAA,MAAM,EAAE;AACP,oBAAY;AAAEP,UAAAA,UAAU,EAAE,CAAE,YAAF;AAAd;AADL,OAFT;AAKCQ,MAAAA,OAAO,EAAE,iBAAEC,IAAF;AAAA,eAAYA,IAAI,CAACC,OAAL,IAAgBD,IAAI,CAACC,OAAL,CAAaC,KAAb,KAAuB,WAAnD;AAAA,OALV;AAMCC,MAAAA,SAND,qBAMYH,IANZ,EAMmB;AAAA,4BACgBA,IAAI,CAACC,OADrB;AAAA,YACTT,UADS,iBACTA,UADS;AAAA,YACGE,QADH,iBACGA,QADH;AAEjB,YAAMU,KAAK,GAAG,EAAd,CAFiB,CAGjB;;AACA,YAAKZ,UAAL,EAAkB;AACjBY,UAAAA,KAAK,CAACZ,UAAN,GAAmBA,UAAnB;AACA,SANgB,CAOjB;;;AACA,YAAKE,QAAQ,KAAK,EAAlB,EAAuB;AACtBU,UAAAA,KAAK,CAACV,QAAN,GAAiB,IAAjB;AACA;;AACD,eAAO,yBAAa,WAAb,EAA0BU,KAA1B,CAAP;AACA;AAlBF,KADK;AADK,GA1BW;AAmDvBC,EAAAA,IAAI,EAAJA,aAnDuB;AAqDvBC,EAAAA,IArDuB,sBAqDA;AAAA,QAAff,UAAe,QAAfA,UAAe;AAAA,QACdC,UADc,GACWD,UADX,CACdC,UADc;AAAA,QACFE,QADE,GACWH,UADX,CACFG,QADE;AAGtB,QAAMa,OAAO,GAAGf,UAAU,sBACZA,UADY,WAEzB,aAFD;AAIA,QAAMgB,WAAW,GAAGd,QAAQ,GAC3B,iBAD2B,GAE3B,EAFD;AAIA,WACC,4BAAC,gBAAD,QACG,qBAAS,CAAEa,OAAF,EAAWC,WAAX,CAAT,EAAoCC,IAApC,CAA0C,IAA1C,CADH,CADD;AAKA;AArEsB,CAAjB","sourcesContent":["/**\n * External dependencies\n */\nimport { compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { RawHTML } from '@wordpress/element';\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\n\nexport const name = 'core/more';\n\nexport const settings = {\n\ttitle: _x( 'More', 'block name' ),\n\n\tdescription: __( 'Content before this block will be shown in the excerpt on your archives page.' ),\n\n\ticon,\n\n\tcategory: 'layout',\n\n\tsupports: {\n\t\tcustomClassName: false,\n\t\tclassName: false,\n\t\thtml: false,\n\t\tmultiple: false,\n\t},\n\n\tattributes: {\n\t\tcustomText: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tnoTeaser: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'raw',\n\t\t\t\tschema: {\n\t\t\t\t\t'wp-block': { attributes: [ 'data-block' ] },\n\t\t\t\t},\n\t\t\t\tisMatch: ( node ) => node.dataset && node.dataset.block === 'core/more',\n\t\t\t\ttransform( node ) {\n\t\t\t\t\tconst { customText, noTeaser } = node.dataset;\n\t\t\t\t\tconst attrs = {};\n\t\t\t\t\t// Don't copy unless defined and not an empty string\n\t\t\t\t\tif ( customText ) {\n\t\t\t\t\t\tattrs.customText = customText;\n\t\t\t\t\t}\n\t\t\t\t\t// Special handling for boolean\n\t\t\t\t\tif ( noTeaser === '' ) {\n\t\t\t\t\t\tattrs.noTeaser = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/more', attrs );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst { customText, noTeaser } = attributes;\n\n\t\tconst moreTag = customText ?\n\t\t\t`<!--more ${ customText }-->` :\n\t\t\t'<!--more-->';\n\n\t\tconst noTeaserTag = noTeaser ?\n\t\t\t'<!--noteaser-->' :\n\t\t\t'';\n\n\t\treturn (\n\t\t\t<RawHTML>\n\t\t\t\t{ compact( [ moreTag, noTeaserTag ] ).join( '\\n' ) }\n\t\t\t</RawHTML>\n\t\t);\n\t},\n};\n"]}