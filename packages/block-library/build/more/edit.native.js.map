{"version":3,"sources":["@wordpress/block-library/src/more/edit.native.js"],"names":["MoreEdit","arguments","onChangeInput","bind","state","defaultText","newValue","indexOf","insertBlocksAfter","props","setState","value","length","undefined","setAttributes","customText","styles","attributes","onFocus","onBlur","isSelected","renderLine","renderText","Component"],"mappings":";;;;;;;;;AASA;;;;;;;;;;;;;;AANA;;AAKA;;AAEA;;AAQA;;AACA;;AAnBA;;;;AAKA;;;;AAUA;;;IAMqBA,Q;;;;;AACpB,sBAAc;AAAA;;AAAA;AACb,+GAAUC,SAAV;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,mFAArB;AAEA,UAAKC,KAAL,GAAa;AACZC,MAAAA,WAAW,EAAE,cAAI,WAAJ;AADD,KAAb;AAJa;AAOb;;;;kCAEcC,Q,EAAW;AACzB;AACA;AACA;AACA;AACA,UAAKA,QAAQ,CAACC,OAAT,CAAkB,IAAlB,MAA6B,CAAC,CAAnC,EAAuC;AAAA,YAC9BC,iBAD8B,GACR,KAAKC,KADG,CAC9BD,iBAD8B;AAEtCA,QAAAA,iBAAiB,CAAE,CAAE,yBAAa,kCAAb,CAAF,CAAF,CAAjB;AACA;AACA,OATwB,CAUzB;;;AACA,WAAKE,QAAL,CAAe;AACdL,QAAAA,WAAW,EAAE;AADC,OAAf;AAGA,UAAMM,KAAK,GAAGL,QAAQ,CAACM,MAAT,KAAoB,CAApB,GAAwBC,SAAxB,GAAoCP,QAAlD;AACA,WAAKG,KAAL,CAAWK,aAAX,CAA0B;AAAEC,QAAAA,UAAU,EAAEJ;AAAd,OAA1B;AACA;;;iCAEY;AACZ,aAAO,4BAAC,iBAAD;AAAM,QAAA,KAAK,EAAGK,gBAAQ,0BAAR;AAAd,QAAP;AACA;;;iCAEY;AAAA,wBAC4B,KAAKP,KADjC;AAAA,UACJQ,UADI,eACJA,UADI;AAAA,UACQC,OADR,eACQA,OADR;AAAA,UACiBC,MADjB,eACiBA,MADjB;AAAA,UAEJJ,UAFI,GAEWE,UAFX,CAEJF,UAFI;AAAA,UAGJV,WAHI,GAGY,KAAKD,KAHjB,CAGJC,WAHI;AAIZ,UAAMM,KAAK,GAAGI,UAAU,KAAKF,SAAf,GAA2BE,UAA3B,GAAwCV,WAAtD;AAEA,aACC,4BAAC,iBAAD,QACC,4BAAC,sBAAD;AACC,QAAA,KAAK,EAAGW,gBAAQ,0BAAR,CADT;AAEC,QAAA,KAAK,EAAGL,KAFT;AAGC,QAAA,SAAS,EAAG,IAHb;AAIC,QAAA,qBAAqB,EAAC,aAJvB;AAKC,QAAA,QAAQ,EAAG,KAAKT,aALjB;AAMC,QAAA,WAAW,EAAGG,WANf;AAOC,QAAA,UAAU,EAAG,KAAKI,KAAL,CAAWW,UAPzB;AAQC,QAAA,OAAO,EAAGF,OARX;AASC,QAAA,MAAM,EAAGC;AATV,QADD,CADD;AAeA;;;6BAEQ;AACR,aACC,4BAAC,iBAAD;AAAM,QAAA,KAAK,EAAGH,gBAAQ,+BAAR;AAAd,SACG,KAAKK,UAAL,EADH,EAEG,KAAKC,UAAL,EAFH,EAGG,KAAKD,UAAL,EAHH,CADD;AAOA;;;EA/DoCE,kB","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport {\n\tgetDefaultBlockName,\n\tcreateBlock,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { PlainText } from '@wordpress/block-editor';\nimport styles from './editor.scss';\n\nexport default class MoreEdit extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onChangeInput = this.onChangeInput.bind( this );\n\n\t\tthis.state = {\n\t\t\tdefaultText: __( 'Read more' ),\n\t\t};\n\t}\n\n\tonChangeInput( newValue ) {\n\t\t// Detect Enter.key and add new empty block after.\n\t\t// Note: This is detected after the fact, and the newline could be visible on the block\n\t\t// for a very small time. This is OK for the alpha, we will revisit the logic later.\n\t\t// See https://github.com/wordpress-mobile/gutenberg-mobile/issues/324\n\t\tif ( newValue.indexOf( '\\n' ) !== -1 ) {\n\t\t\tconst { insertBlocksAfter } = this.props;\n\t\t\tinsertBlocksAfter( [ createBlock( getDefaultBlockName() ) ] );\n\t\t\treturn;\n\t\t}\n\t\t// Set defaultText to an empty string, allowing the user to clear/replace the input field's text\n\t\tthis.setState( {\n\t\t\tdefaultText: '',\n\t\t} );\n\t\tconst value = newValue.length === 0 ? undefined : newValue;\n\t\tthis.props.setAttributes( { customText: value } );\n\t}\n\n\trenderLine() {\n\t\treturn <View style={ styles[ 'block-library-more__line' ] } />;\n\t}\n\n\trenderText() {\n\t\tconst { attributes, onFocus, onBlur } = this.props;\n\t\tconst { customText } = attributes;\n\t\tconst { defaultText } = this.state;\n\t\tconst value = customText !== undefined ? customText : defaultText;\n\n\t\treturn (\n\t\t\t<View>\n\t\t\t\t<PlainText\n\t\t\t\t\tstyle={ styles[ 'block-library-more__text' ] }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tmultiline={ true }\n\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\tonChange={ this.onChangeInput }\n\t\t\t\t\tplaceholder={ defaultText }\n\t\t\t\t\tisSelected={ this.props.isSelected }\n\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\tonBlur={ onBlur }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View style={ styles[ 'block-library-more__container' ] }>\n\t\t\t\t{ this.renderLine() }\n\t\t\t\t{ this.renderText() }\n\t\t\t\t{ this.renderLine() }\n\t\t\t</View>\n\t\t);\n\t}\n}\n"]}