{"version":3,"sources":["@wordpress/block-library/src/gallery/index.js"],"names":["filter","every","map","some","__","createBlock","RichText","mediaUpload","createBlobURL","default","edit","defaultColumnsNumber","pickRelevantMediaFiles","icon","blockAttributes","images","type","source","selector","query","url","attribute","link","alt","id","caption","ids","columns","imageCrop","linkTo","name","parseShortcodeIds","split","parseInt","settings","title","description","category","keywords","attributes","supports","align","transforms","from","isMultiBlock","blocks","transform","undefined","validImages","tag","shortcode","named","isMatch","files","length","file","indexOf","onChange","block","filesList","onFileChange","imagesAttr","clientId","allowedTypes","to","save","image","href","img","deprecated","isEligible","index","migrate"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { filter, every, map, some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createBlock } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/block-editor';\nimport { mediaUpload } from '@wordpress/editor';\nimport { createBlobURL } from '@wordpress/blob';\n\n/**\n * Internal dependencies\n */\nimport { default as edit, defaultColumnsNumber, pickRelevantMediaFiles } from './edit';\nimport icon from './icon';\n\nconst blockAttributes = {\n\timages: {\n\t\ttype: 'array',\n\t\tdefault: [],\n\t\tsource: 'query',\n\t\tselector: 'ul.wp-block-gallery .blocks-gallery-item',\n\t\tquery: {\n\t\t\turl: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'src',\n\t\t\t},\n\t\t\tlink: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'data-link',\n\t\t\t},\n\t\t\talt: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'alt',\n\t\t\t\tdefault: '',\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tsource: 'attribute',\n\t\t\t\tselector: 'img',\n\t\t\t\tattribute: 'data-id',\n\t\t\t},\n\t\t\tcaption: {\n\t\t\t\ttype: 'string',\n\t\t\t\tsource: 'html',\n\t\t\t\tselector: 'figcaption',\n\t\t\t},\n\t\t},\n\t},\n\tids: {\n\t\ttype: 'array',\n\t\tdefault: [],\n\t},\n\tcolumns: {\n\t\ttype: 'number',\n\t},\n\timageCrop: {\n\t\ttype: 'boolean',\n\t\tdefault: true,\n\t},\n\tlinkTo: {\n\t\ttype: 'string',\n\t\tdefault: 'none',\n\t},\n};\n\nexport const name = 'core/gallery';\n\nconst parseShortcodeIds = ( ids ) => {\n\tif ( ! ids ) {\n\t\treturn [];\n\t}\n\n\treturn ids.split( ',' ).map( ( id ) => (\n\t\tparseInt( id, 10 )\n\t) );\n};\n\nexport const settings = {\n\ttitle: __( 'Gallery' ),\n\tdescription: __( 'Display multiple images in a rich gallery.' ),\n\ticon,\n\tcategory: 'common',\n\tkeywords: [ __( 'images' ), __( 'photos' ) ],\n\tattributes: blockAttributes,\n\tsupports: {\n\t\talign: true,\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tisMultiBlock: true,\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( attributes ) => {\n\t\t\t\t\t// Init the align attribute from the first item which may be either the placeholder or an image.\n\t\t\t\t\tlet { align } = attributes[ 0 ];\n\t\t\t\t\t// Loop through all the images and check if they have the same align.\n\t\t\t\t\talign = every( attributes, [ 'align', align ] ) ? align : undefined;\n\n\t\t\t\t\tconst validImages = filter( attributes, ( { id, url } ) => id && url );\n\n\t\t\t\t\treturn createBlock( 'core/gallery', {\n\t\t\t\t\t\timages: validImages.map( ( { id, url, alt, caption } ) => ( { id, url, alt, caption } ) ),\n\t\t\t\t\t\tids: validImages.map( ( { id } ) => id ),\n\t\t\t\t\t\talign,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'shortcode',\n\t\t\t\ttag: 'gallery',\n\t\t\t\tattributes: {\n\t\t\t\t\timages: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids ).map( ( id ) => ( {\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t} ) );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tids: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\tshortcode: ( { named: { ids } } ) => {\n\t\t\t\t\t\t\treturn parseShortcodeIds( ids );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tcolumns: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tshortcode: ( { named: { columns = '3' } } ) => {\n\t\t\t\t\t\t\treturn parseInt( columns, 10 );\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlinkTo: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { link = 'attachment' } } ) => {\n\t\t\t\t\t\t\treturn link === 'file' ? 'media' : link;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t// When created by drag and dropping multiple files on an insertion point\n\t\t\t\ttype: 'files',\n\t\t\t\tisMatch( files ) {\n\t\t\t\t\treturn files.length !== 1 && every( files, ( file ) => file.type.indexOf( 'image/' ) === 0 );\n\t\t\t\t},\n\t\t\t\ttransform( files, onChange ) {\n\t\t\t\t\tconst block = createBlock( 'core/gallery', {\n\t\t\t\t\t\timages: files.map( ( file ) => pickRelevantMediaFiles( {\n\t\t\t\t\t\t\turl: createBlobURL( file ),\n\t\t\t\t\t\t} ) ),\n\t\t\t\t\t} );\n\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\tfilesList: files,\n\t\t\t\t\t\tonFileChange: ( images ) => {\n\t\t\t\t\t\t\tconst imagesAttr = images.map(\n\t\t\t\t\t\t\t\tpickRelevantMediaFiles\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tonChange( block.clientId, {\n\t\t\t\t\t\t\t\tids: map( imagesAttr, 'id' ),\n\t\t\t\t\t\t\t\timages: imagesAttr,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tallowedTypes: [ 'image' ],\n\t\t\t\t\t} );\n\t\t\t\t\treturn block;\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tto: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/image' ],\n\t\t\t\ttransform: ( { images, align } ) => {\n\t\t\t\t\tif ( images.length > 0 ) {\n\t\t\t\t\t\treturn images.map( ( { id, url, alt, caption } ) => createBlock( 'core/image', { id, url, alt, caption, align } ) );\n\t\t\t\t\t}\n\t\t\t\t\treturn createBlock( 'core/image', { align } );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst { images, columns = defaultColumnsNumber( attributes ), imageCrop, linkTo } = attributes;\n\t\treturn (\n\t\t\t<ul className={ `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\tlet href;\n\n\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } data-link={ image.link } className={ image.id ? `wp-image-${ image.id }` : null } />;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={ image.id || image.url } className=\"blocks-gallery-item\">\n\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ image.caption } />\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t);\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tisEligible( { images, ids } ) {\n\t\t\t\treturn images &&\n\t\t\t\t\timages.length > 0 &&\n\t\t\t\t\t(\n\t\t\t\t\t\t( ! ids && images ) ||\n\t\t\t\t\t\t( ids && images && ids.length !== images.length ) ||\n\t\t\t\t\t\tsome( images, ( id, index ) => {\n\t\t\t\t\t\t\tif ( ! id && ids[ index ] !== null ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn parseInt( id, 10 ) !== ids[ index ];\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t},\n\t\t\tmigrate( attributes ) {\n\t\t\t\treturn {\n\t\t\t\t\t...attributes,\n\t\t\t\t\tids: map( attributes.images, ( { id } ) => {\n\t\t\t\t\t\tif ( ! id ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parseInt( id, 10 );\n\t\t\t\t\t} ),\n\t\t\t\t};\n\t\t\t},\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { images, columns = defaultColumnsNumber( attributes ), imageCrop, linkTo } = attributes;\n\t\t\t\treturn (\n\t\t\t\t\t<ul className={ `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } data-link={ image.link } className={ image.id ? `wp-image-${ image.id }` : null } />;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={ image.id || image.url } className=\"blocks-gallery-item\">\n\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ image.caption } />\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</ul>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: blockAttributes,\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { images, columns = defaultColumnsNumber( attributes ), imageCrop, linkTo } = attributes;\n\t\t\t\treturn (\n\t\t\t\t\t<ul className={ `columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } data-link={ image.link } />;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li key={ image.id || image.url } className=\"blocks-gallery-item\">\n\t\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t\t\t{ image.caption && image.caption.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ image.caption } />\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</ul>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: {\n\t\t\t\t...blockAttributes,\n\t\t\t\timages: {\n\t\t\t\t\t...blockAttributes.images,\n\t\t\t\t\tselector: 'div.wp-block-gallery figure.blocks-gallery-image img',\n\t\t\t\t},\n\t\t\t\talign: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdefault: 'none',\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { images, columns = defaultColumnsNumber( attributes ), align, imageCrop, linkTo } = attributes;\n\t\t\t\treturn (\n\t\t\t\t\t<div className={ `align${ align } columns-${ columns } ${ imageCrop ? 'is-cropped' : '' }` } >\n\t\t\t\t\t\t{ images.map( ( image ) => {\n\t\t\t\t\t\t\tlet href;\n\n\t\t\t\t\t\t\tswitch ( linkTo ) {\n\t\t\t\t\t\t\t\tcase 'media':\n\t\t\t\t\t\t\t\t\thref = image.url;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'attachment':\n\t\t\t\t\t\t\t\t\thref = image.link;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst img = <img src={ image.url } alt={ image.alt } data-id={ image.id } />;\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<figure key={ image.id || image.url } className=\"blocks-gallery-image\">\n\t\t\t\t\t\t\t\t\t{ href ? <a href={ href }>{ img }</a> : img }\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n"]}