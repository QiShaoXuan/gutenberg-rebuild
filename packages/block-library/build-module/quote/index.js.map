{"version":3,"sources":["@wordpress/block-library/src/quote/index.js"],"names":["omit","__","_x","createBlock","getPhrasingContentSchema","RichText","join","split","create","toHTMLString","edit","icon","ATTRIBUTE_QUOTE","ATTRIBUTE_CITATION","blockAttributes","type","source","selector","multiline","default","name","settings","title","description","category","keywords","attributes","styles","label","isDefault","transforms","from","isMultiBlock","blocks","transform","value","map","content","html","multilineTag","citation","prefix","isMatch","node","isParagraphOrSingleCite","hasCitation","child","nodeName","Array","childNodes","every","schema","blockquote","children","p","cite","to","paragraphs","push","piece","length","attrs","pieces","headingBlock","quotePieces","slice","quoteBlock","save","align","textAlign","isEmpty","merge","deprecated","style","migrate","className"],"mappings":";;;;;;;;;AAAA;;;AAGA,SAASA,IAAT,QAAqB,QAArB;AAEA;;;;AAGA,SAASC,EAAT,EAAaC,EAAb,QAAuB,iBAAvB;AACA,SAASC,WAAT,EAAsBC,wBAAtB,QAAsD,mBAAtD;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,EAA8BC,YAA9B,QAAkD,sBAAlD;AAEA;;;;AAGA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,eAAT,EAA0BC,kBAA1B,QAAoD,YAApD;AAEA,IAAMC,eAAe,6DAClBF,eADkB,EACC;AACpBG,EAAAA,IAAI,EAAE,QADc;AAEpBC,EAAAA,MAAM,EAAE,MAFY;AAGpBC,EAAAA,QAAQ,EAAE,YAHU;AAIpBC,EAAAA,SAAS,EAAE,GAJS;AAKpBC,EAAAA,OAAO,EAAE;AALW,CADD,qCAQlBN,kBARkB,EAQI;AACvBE,EAAAA,IAAI,EAAE,QADiB;AAEvBC,EAAAA,MAAM,EAAE,MAFe;AAGvBC,EAAAA,QAAQ,EAAE,MAHa;AAIvBE,EAAAA,OAAO,EAAE;AAJc,CARJ,8CAcb;AACNJ,EAAAA,IAAI,EAAE;AADA,CAda,oBAArB;AAmBA,OAAO,IAAMK,IAAI,GAAG,YAAb;AAEP,OAAO,IAAMC,QAAQ,GAAG;AACvBC,EAAAA,KAAK,EAAErB,EAAE,CAAE,OAAF,CADc;AAEvBsB,EAAAA,WAAW,EAAEtB,EAAE,CAAE,4FAAF,CAFQ;AAGvBU,EAAAA,IAAI,EAAJA,IAHuB;AAIvBa,EAAAA,QAAQ,EAAE,QAJa;AAKvBC,EAAAA,QAAQ,EAAE,CAAExB,EAAE,CAAE,YAAF,CAAJ,CALa;AAOvByB,EAAAA,UAAU,EAAEZ,eAPW;AASvBa,EAAAA,MAAM,EAAE,CACP;AAAEP,IAAAA,IAAI,EAAE,SAAR;AAAmBQ,IAAAA,KAAK,EAAE1B,EAAE,CAAE,SAAF,EAAa,aAAb,CAA5B;AAA0D2B,IAAAA,SAAS,EAAE;AAArE,GADO,EAEP;AAAET,IAAAA,IAAI,EAAE,OAAR;AAAiBQ,IAAAA,KAAK,EAAE1B,EAAE,CAAE,OAAF,EAAW,aAAX;AAA1B,GAFO,CATe;AAcvB4B,EAAAA,UAAU,EAAE;AACXC,IAAAA,IAAI,EAAE,CACL;AACChB,MAAAA,IAAI,EAAE,OADP;AAECiB,MAAAA,YAAY,EAAE,IAFf;AAGCC,MAAAA,MAAM,EAAE,CAAE,gBAAF,CAHT;AAICC,MAAAA,SAAS,EAAE,mBAAER,UAAF,EAAkB;AAC5B,eAAOvB,WAAW,CAAE,YAAF,EAAgB;AACjCgC,UAAAA,KAAK,EAAE1B,YAAY,CAAE;AACpB0B,YAAAA,KAAK,EAAE7B,IAAI,CAAEoB,UAAU,CAACU,GAAX,CAAgB;AAAA,kBAAIC,OAAJ,QAAIA,OAAJ;AAAA,qBAC5B7B,MAAM,CAAE;AAAE8B,gBAAAA,IAAI,EAAED;AAAR,eAAF,CADsB;AAAA,aAAhB,CAAF,EAER,QAFQ,CADS;AAIpBE,YAAAA,YAAY,EAAE;AAJM,WAAF;AADc,SAAhB,CAAlB;AAQA;AAbF,KADK,EAgBL;AACCxB,MAAAA,IAAI,EAAE,OADP;AAECkB,MAAAA,MAAM,EAAE,CAAE,cAAF,CAFT;AAGCC,MAAAA,SAAS,EAAE,0BAAmB;AAAA,YAAfG,OAAe,SAAfA,OAAe;AAC7B,eAAOlC,WAAW,CAAE,YAAF,EAAgB;AACjCgC,UAAAA,KAAK,eAASE,OAAT;AAD4B,SAAhB,CAAlB;AAGA;AAPF,KAhBK,EAyBL;AACCtB,MAAAA,IAAI,EAAE,OADP;AAECkB,MAAAA,MAAM,EAAE,CAAE,gBAAF,CAFT;AAGCC,MAAAA,SAAS,EAAE;AAAA,YAAIC,KAAJ,SAAIA,KAAJ;AAAA,YAAWK,QAAX,SAAWA,QAAX;AAAA,eAA2BrC,WAAW,CAAE,YAAF,EAAgB;AAChEgC,UAAAA,KAAK,EAALA,KADgE;AAEhEK,UAAAA,QAAQ,EAARA;AAFgE,SAAhB,CAAtC;AAAA;AAHZ,KAzBK,EAiCL;AACCzB,MAAAA,IAAI,EAAE,QADP;AAEC0B,MAAAA,MAAM,EAAE,GAFT;AAGCP,MAAAA,SAAS,EAAE,mBAAEG,OAAF,EAAe;AACzB,eAAOlC,WAAW,CAAE,YAAF,EAAgB;AACjCgC,UAAAA,KAAK,eAASE,OAAT;AAD4B,SAAhB,CAAlB;AAGA;AAPF,KAjCK,EA0CL;AACCtB,MAAAA,IAAI,EAAE,KADP;AAEC2B,MAAAA,OAAO,EAAE,iBAAEC,IAAF,EAAY;AACpB,YAAMC,uBAAuB,GAAK,YAAM;AACvC,cAAIC,WAAW,GAAG,KAAlB;AACA,iBAAO,UAAEC,KAAF,EAAa;AACnB;AACA,gBAAKA,KAAK,CAACC,QAAN,KAAmB,GAAxB,EAA8B;AAC7B,qBAAO,IAAP;AACA,aAJkB,CAKnB;;;AACA,gBACC,CAAEF,WAAF,IACAC,KAAK,CAACC,QAAN,KAAmB,MAFpB,EAGE;AACDF,cAAAA,WAAW,GAAG,IAAd;AACA,qBAAO,IAAP;AACA;AACD,WAbD;AAcA,SAhB+B,EAAhC;;AAiBA,eAAOF,IAAI,CAACI,QAAL,KAAkB,YAAlB,IACP;AACA;AACAC,QAAAA,KAAK,CAACjB,IAAN,CAAYY,IAAI,CAACM,UAAjB,EAA8BC,KAA9B,CACCN,uBADD,CAHA;AAMA,OA1BF;AA2BCO,MAAAA,MAAM,EAAE;AACPC,QAAAA,UAAU,EAAE;AACXC,UAAAA,QAAQ,EAAE;AACTC,YAAAA,CAAC,EAAE;AACFD,cAAAA,QAAQ,EAAEjD,wBAAwB;AADhC,aADM;AAITmD,YAAAA,IAAI,EAAE;AACLF,cAAAA,QAAQ,EAAEjD,wBAAwB;AAD7B;AAJG;AADC;AADL;AA3BT,KA1CK,CADK;AAoFXoD,IAAAA,EAAE,EAAE,CACH;AACCzC,MAAAA,IAAI,EAAE,OADP;AAECkB,MAAAA,MAAM,EAAE,CAAE,gBAAF,CAFT;AAGCC,MAAAA,SAAS,EAAE,0BAA2B;AAAA,YAAvBC,KAAuB,SAAvBA,KAAuB;AAAA,YAAhBK,QAAgB,SAAhBA,QAAgB;AACrC,YAAMiB,UAAU,GAAG,EAAnB;;AACA,YAAKtB,KAAK,IAAIA,KAAK,KAAK,SAAxB,EAAoC;AACnCsB,UAAAA,UAAU,CAACC,IAAX,OAAAD,UAAU,qBACNlD,KAAK,CAAEC,MAAM,CAAE;AAAE8B,YAAAA,IAAI,EAAEH,KAAR;AAAeI,YAAAA,YAAY,EAAE;AAA7B,WAAF,CAAR,EAAgD,QAAhD,CAAL,CACDH,GADC,CACI,UAAEuB,KAAF;AAAA,mBACLxD,WAAW,CAAE,gBAAF,EAAoB;AAC9BkC,cAAAA,OAAO,EAAE5B,YAAY,CAAE;AAAE0B,gBAAAA,KAAK,EAAEwB;AAAT,eAAF;AADS,aAApB,CADN;AAAA,WADJ,CADM,EAAV;AAQA;;AACD,YAAKnB,QAAQ,IAAIA,QAAQ,KAAK,SAA9B,EAA0C;AACzCiB,UAAAA,UAAU,CAACC,IAAX,CACCvD,WAAW,CAAE,gBAAF,EAAoB;AAC9BkC,YAAAA,OAAO,EAAEG;AADqB,WAApB,CADZ;AAKA;;AAED,YAAKiB,UAAU,CAACG,MAAX,KAAsB,CAA3B,EAA+B;AAC9B,iBAAOzD,WAAW,CAAE,gBAAF,EAAoB;AACrCkC,YAAAA,OAAO,EAAE;AAD4B,WAApB,CAAlB;AAGA;;AACD,eAAOoB,UAAP;AACA;AA7BF,KADG,EAiCH;AACC1C,MAAAA,IAAI,EAAE,OADP;AAECkB,MAAAA,MAAM,EAAE,CAAE,cAAF,CAFT;AAGCC,MAAAA,SAAS,EAAE,0BAAqC;AAAA,YAAjCC,KAAiC,SAAjCA,KAAiC;AAAA,YAA1BK,QAA0B,SAA1BA,QAA0B;AAAA,YAAbqB,KAAa;;AAC/C;AACA;AACA;AACA,YAAK1B,KAAK,KAAK,SAAf,EAA2B;AAC1B,iBAAOhC,WAAW,CAAE,cAAF,EAAkB;AACnCkC,YAAAA,OAAO,EAAEG;AAD0B,WAAlB,CAAlB;AAGA;;AAED,YAAMsB,MAAM,GAAGvD,KAAK,CAAEC,MAAM,CAAE;AAAE8B,UAAAA,IAAI,EAAEH,KAAR;AAAeI,UAAAA,YAAY,EAAE;AAA7B,SAAF,CAAR,EAAgD,QAAhD,CAApB;AAEA,YAAMwB,YAAY,GAAG5D,WAAW,CAAE,cAAF,EAAkB;AACjDkC,UAAAA,OAAO,EAAE5B,YAAY,CAAE;AAAE0B,YAAAA,KAAK,EAAE2B,MAAM,CAAE,CAAF;AAAf,WAAF;AAD4B,SAAlB,CAAhC;;AAIA,YAAK,CAAEtB,QAAF,IAAcsB,MAAM,CAACF,MAAP,KAAkB,CAArC,EAAyC;AACxC,iBAAOG,YAAP;AACA;;AAED,YAAMC,WAAW,GAAGF,MAAM,CAACG,KAAP,CAAc,CAAd,CAApB;AAEA,YAAMC,UAAU,GAAG/D,WAAW,CAAE,YAAF,oBAC1B0D,KAD0B;AAE7BrB,UAAAA,QAAQ,EAARA,QAF6B;AAG7BL,UAAAA,KAAK,EAAE1B,YAAY,CAAE;AACpB0B,YAAAA,KAAK,EAAE6B,WAAW,CAACJ,MAAZ,GAAqBtD,IAAI,CAAEwD,MAAM,CAACG,KAAP,CAAc,CAAd,CAAF,EAAqB,QAArB,CAAzB,GAA2DzD,MAAM,EADpD;AAEpB+B,YAAAA,YAAY,EAAE;AAFM,WAAF;AAHU,WAA9B;AASA,eAAO,CAAEwB,YAAF,EAAgBG,UAAhB,CAAP;AACA;AAnCF,KAjCG,EAuEH;AACCnD,MAAAA,IAAI,EAAE,OADP;AAECkB,MAAAA,MAAM,EAAE,CAAE,gBAAF,CAFT;AAGCC,MAAAA,SAAS,EAAE,0BAA2B;AAAA,YAAvBC,KAAuB,SAAvBA,KAAuB;AAAA,YAAhBK,QAAgB,SAAhBA,QAAgB;AACrC,eAAOrC,WAAW,CAAE,gBAAF,EAAoB;AACrCgC,UAAAA,KAAK,EAALA,KADqC;AAErCK,UAAAA,QAAQ,EAARA;AAFqC,SAApB,CAAlB;AAIA;AARF,KAvEG;AApFO,GAdW;AAsLvB9B,EAAAA,IAAI,EAAJA,IAtLuB;AAwLvByD,EAAAA,IAxLuB,uBAwLA;AAAA,QAAfzC,UAAe,SAAfA,UAAe;AAAA,QACd0C,KADc,GACa1C,UADb,CACd0C,KADc;AAAA,QACPjC,KADO,GACaT,UADb,CACPS,KADO;AAAA,QACAK,QADA,GACad,UADb,CACAc,QADA;AAGtB,WACC;AAAY,MAAA,KAAK,EAAG;AAAE6B,QAAAA,SAAS,EAAED,KAAK,GAAGA,KAAH,GAAW;AAA7B;AAApB,OACC,cAAC,QAAD,CAAU,OAAV;AAAkB,MAAA,SAAS,MAA3B;AAA4B,MAAA,KAAK,EAAGjC;AAApC,MADD,EAEG,CAAE9B,QAAQ,CAACiE,OAAT,CAAkB9B,QAAlB,CAAF,IAAkC,cAAC,QAAD,CAAU,OAAV;AAAkB,MAAA,OAAO,EAAC,MAA1B;AAAiC,MAAA,KAAK,EAAGA;AAAzC,MAFrC,CADD;AAMA,GAjMsB;AAmMvB+B,EAAAA,KAnMuB,iBAmMhB7C,UAnMgB,SAmMkB;AAAA,QAApBS,KAAoB,SAApBA,KAAoB;AAAA,QAAbK,QAAa,SAAbA,QAAa;;AACxC,QAAK,CAAEL,KAAF,IAAWA,KAAK,KAAK,SAA1B,EAAsC;AACrC,+BACIT,UADJ;AAECc,QAAAA,QAAQ,EAAEd,UAAU,CAACc,QAAX,GAAsBA;AAFjC;AAIA;;AAED,6BACId,UADJ;AAECS,MAAAA,KAAK,EAAET,UAAU,CAACS,KAAX,GAAmBA,KAF3B;AAGCK,MAAAA,QAAQ,EAAEd,UAAU,CAACc,QAAX,GAAsBA;AAHjC;AAKA,GAhNsB;AAkNvBgC,EAAAA,UAAU,EAAE,CACX;AACC9C,IAAAA,UAAU,oBACNZ,eADM;AAET2D,MAAAA,KAAK,EAAE;AACN1D,QAAAA,IAAI,EAAE,QADA;AAENI,QAAAA,OAAO,EAAE;AAFH;AAFE,MADX;AASCuD,IAAAA,OATD,mBASUhD,UATV,EASuB;AACrB,UAAKA,UAAU,CAAC+C,KAAX,KAAqB,CAA1B,EAA8B;AAC7B,iCACIzE,IAAI,CAAE0B,UAAF,EAAc,CAAE,OAAF,CAAd,CADR;AAECiD,UAAAA,SAAS,EAAEjD,UAAU,CAACiD,SAAX,GAAuBjD,UAAU,CAACiD,SAAX,GAAuB,iBAA9C,GAAkE;AAF9E;AAIA;;AAED,aAAOjD,UAAP;AACA,KAlBF;AAoBCyC,IAAAA,IApBD,uBAoBwB;AAAA,UAAfzC,UAAe,SAAfA,UAAe;AAAA,UACd0C,KADc,GACoB1C,UADpB,CACd0C,KADc;AAAA,UACPjC,KADO,GACoBT,UADpB,CACPS,KADO;AAAA,UACAK,QADA,GACoBd,UADpB,CACAc,QADA;AAAA,UACUiC,KADV,GACoB/C,UADpB,CACU+C,KADV;AAGtB,aACC;AACC,QAAA,SAAS,EAAGA,KAAK,KAAK,CAAV,GAAc,UAAd,GAA2B,EADxC;AAEC,QAAA,KAAK,EAAG;AAAEJ,UAAAA,SAAS,EAAED,KAAK,GAAGA,KAAH,GAAW;AAA7B;AAFT,SAIC,cAAC,QAAD,CAAU,OAAV;AAAkB,QAAA,SAAS,MAA3B;AAA4B,QAAA,KAAK,EAAGjC;AAApC,QAJD,EAKG,CAAE9B,QAAQ,CAACiE,OAAT,CAAkB9B,QAAlB,CAAF,IAAkC,cAAC,QAAD,CAAU,OAAV;AAAkB,QAAA,OAAO,EAAC,MAA1B;AAAiC,QAAA,KAAK,EAAGA;AAAzC,QALrC,CADD;AASA;AAhCF,GADW,EAmCX;AACCd,IAAAA,UAAU,oBACNZ,eADM;AAET0B,MAAAA,QAAQ,EAAE;AACTzB,QAAAA,IAAI,EAAE,QADG;AAETC,QAAAA,MAAM,EAAE,MAFC;AAGTC,QAAAA,QAAQ,EAAE,QAHD;AAITE,QAAAA,OAAO,EAAE;AAJA,OAFD;AAQTsD,MAAAA,KAAK,EAAE;AACN1D,QAAAA,IAAI,EAAE,QADA;AAENI,QAAAA,OAAO,EAAE;AAFH;AARE,MADX;AAeCgD,IAAAA,IAfD,wBAewB;AAAA,UAAfzC,UAAe,UAAfA,UAAe;AAAA,UACd0C,KADc,GACoB1C,UADpB,CACd0C,KADc;AAAA,UACPjC,KADO,GACoBT,UADpB,CACPS,KADO;AAAA,UACAK,QADA,GACoBd,UADpB,CACAc,QADA;AAAA,UACUiC,KADV,GACoB/C,UADpB,CACU+C,KADV;AAGtB,aACC;AACC,QAAA,SAAS,+BAA0BA,KAA1B,CADV;AAEC,QAAA,KAAK,EAAG;AAAEJ,UAAAA,SAAS,EAAED,KAAK,GAAGA,KAAH,GAAW;AAA7B;AAFT,SAIC,cAAC,QAAD,CAAU,OAAV;AAAkB,QAAA,SAAS,MAA3B;AAA4B,QAAA,KAAK,EAAGjC;AAApC,QAJD,EAKG,CAAE9B,QAAQ,CAACiE,OAAT,CAAkB9B,QAAlB,CAAF,IAAkC,cAAC,QAAD,CAAU,OAAV;AAAkB,QAAA,OAAO,EAAC,QAA1B;AAAmC,QAAA,KAAK,EAAGA;AAA3C,QALrC,CADD;AASA;AA3BF,GAnCW;AAlNW,CAAjB","sourcesContent":["/**\n * External dependencies\n */\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { createBlock, getPhrasingContentSchema } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/block-editor';\nimport { join, split, create, toHTMLString } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\nimport { ATTRIBUTE_QUOTE, ATTRIBUTE_CITATION } from './contants';\n\nconst blockAttributes = {\n\t[ ATTRIBUTE_QUOTE ]: {\n\t\ttype: 'string',\n\t\tsource: 'html',\n\t\tselector: 'blockquote',\n\t\tmultiline: 'p',\n\t\tdefault: '',\n\t},\n\t[ ATTRIBUTE_CITATION ]: {\n\t\ttype: 'string',\n\t\tsource: 'html',\n\t\tselector: 'cite',\n\t\tdefault: '',\n\t},\n\talign: {\n\t\ttype: 'string',\n\t},\n};\n\nexport const name = 'core/quote';\n\nexport const settings = {\n\ttitle: __( 'Quote' ),\n\tdescription: __( 'Give quoted text visual emphasis. \"In quoting others, we cite ourselves.\" — Julio Cortázar' ),\n\ticon,\n\tcategory: 'common',\n\tkeywords: [ __( 'blockquote' ) ],\n\n\tattributes: blockAttributes,\n\n\tstyles: [\n\t\t{ name: 'default', label: _x( 'Default', 'block style' ), isDefault: true },\n\t\t{ name: 'large', label: _x( 'Large', 'block style' ) },\n\t],\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tisMultiBlock: true,\n\t\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\t\ttransform: ( attributes ) => {\n\t\t\t\t\treturn createBlock( 'core/quote', {\n\t\t\t\t\t\tvalue: toHTMLString( {\n\t\t\t\t\t\t\tvalue: join( attributes.map( ( { content } ) =>\n\t\t\t\t\t\t\t\tcreate( { html: content } )\n\t\t\t\t\t\t\t), '\\u2028' ),\n\t\t\t\t\t\t\tmultilineTag: 'p',\n\t\t\t\t\t\t} ),\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/heading' ],\n\t\t\t\ttransform: ( { content } ) => {\n\t\t\t\t\treturn createBlock( 'core/quote', {\n\t\t\t\t\t\tvalue: `<p>${ content }</p>`,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/pullquote' ],\n\t\t\t\ttransform: ( { value, citation } ) => createBlock( 'core/quote', {\n\t\t\t\t\tvalue,\n\t\t\t\t\tcitation,\n\t\t\t\t} ),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'prefix',\n\t\t\t\tprefix: '>',\n\t\t\t\ttransform: ( content ) => {\n\t\t\t\t\treturn createBlock( 'core/quote', {\n\t\t\t\t\t\tvalue: `<p>${ content }</p>`,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'raw',\n\t\t\t\tisMatch: ( node ) => {\n\t\t\t\t\tconst isParagraphOrSingleCite = ( () => {\n\t\t\t\t\t\tlet hasCitation = false;\n\t\t\t\t\t\treturn ( child ) => {\n\t\t\t\t\t\t\t// Child is a paragraph.\n\t\t\t\t\t\t\tif ( child.nodeName === 'P' ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Child is a cite and no other cite child exists before it.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t! hasCitation &&\n\t\t\t\t\t\t\t\tchild.nodeName === 'CITE'\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\thasCitation = true;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t} )();\n\t\t\t\t\treturn node.nodeName === 'BLOCKQUOTE' &&\n\t\t\t\t\t// The quote block can only handle multiline paragraph\n\t\t\t\t\t// content with an optional cite child.\n\t\t\t\t\tArray.from( node.childNodes ).every(\n\t\t\t\t\t\tisParagraphOrSingleCite\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tschema: {\n\t\t\t\t\tblockquote: {\n\t\t\t\t\t\tchildren: {\n\t\t\t\t\t\t\tp: {\n\t\t\t\t\t\t\t\tchildren: getPhrasingContentSchema(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcite: {\n\t\t\t\t\t\t\t\tchildren: getPhrasingContentSchema(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tto: [\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/paragraph' ],\n\t\t\t\ttransform: ( { value, citation } ) => {\n\t\t\t\t\tconst paragraphs = [];\n\t\t\t\t\tif ( value && value !== '<p></p>' ) {\n\t\t\t\t\t\tparagraphs.push(\n\t\t\t\t\t\t\t...split( create( { html: value, multilineTag: 'p' } ), '\\u2028' )\n\t\t\t\t\t\t\t\t.map( ( piece ) =>\n\t\t\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\t\t\t\t\tcontent: toHTMLString( { value: piece } ),\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif ( citation && citation !== '<p></p>' ) {\n\t\t\t\t\t\tparagraphs.push(\n\t\t\t\t\t\t\tcreateBlock( 'core/paragraph', {\n\t\t\t\t\t\t\t\tcontent: citation,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( paragraphs.length === 0 ) {\n\t\t\t\t\t\treturn createBlock( 'core/paragraph', {\n\t\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t\treturn paragraphs;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/heading' ],\n\t\t\t\ttransform: ( { value, citation, ...attrs } ) => {\n\t\t\t\t\t// If there is no quote content, use the citation as the\n\t\t\t\t\t// content of the resulting heading. A nonexistent citation\n\t\t\t\t\t// will result in an empty heading.\n\t\t\t\t\tif ( value === '<p></p>' ) {\n\t\t\t\t\t\treturn createBlock( 'core/heading', {\n\t\t\t\t\t\t\tcontent: citation,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst pieces = split( create( { html: value, multilineTag: 'p' } ), '\\u2028' );\n\n\t\t\t\t\tconst headingBlock = createBlock( 'core/heading', {\n\t\t\t\t\t\tcontent: toHTMLString( { value: pieces[ 0 ] } ),\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( ! citation && pieces.length === 1 ) {\n\t\t\t\t\t\treturn headingBlock;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst quotePieces = pieces.slice( 1 );\n\n\t\t\t\t\tconst quoteBlock = createBlock( 'core/quote', {\n\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\tcitation,\n\t\t\t\t\t\tvalue: toHTMLString( {\n\t\t\t\t\t\t\tvalue: quotePieces.length ? join( pieces.slice( 1 ), '\\u2028' ) : create(),\n\t\t\t\t\t\t\tmultilineTag: 'p',\n\t\t\t\t\t\t} ),\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn [ headingBlock, quoteBlock ];\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t{\n\t\t\t\ttype: 'block',\n\t\t\t\tblocks: [ 'core/pullquote' ],\n\t\t\t\ttransform: ( { value, citation } ) => {\n\t\t\t\t\treturn createBlock( 'core/pullquote', {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tcitation,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst { align, value, citation } = attributes;\n\n\t\treturn (\n\t\t\t<blockquote style={ { textAlign: align ? align : null } }>\n\t\t\t\t<RichText.Content multiline value={ value } />\n\t\t\t\t{ ! RichText.isEmpty( citation ) && <RichText.Content tagName=\"cite\" value={ citation } /> }\n\t\t\t</blockquote>\n\t\t);\n\t},\n\n\tmerge( attributes, { value, citation } ) {\n\t\tif ( ! value || value === '<p></p>' ) {\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\tcitation: attributes.citation + citation,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tvalue: attributes.value + value,\n\t\t\tcitation: attributes.citation + citation,\n\t\t};\n\t},\n\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: {\n\t\t\t\t...blockAttributes,\n\t\t\t\tstyle: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdefault: 1,\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tmigrate( attributes ) {\n\t\t\t\tif ( attributes.style === 2 ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...omit( attributes, [ 'style' ] ),\n\t\t\t\t\t\tclassName: attributes.className ? attributes.className + ' is-style-large' : 'is-style-large',\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn attributes;\n\t\t\t},\n\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { align, value, citation, style } = attributes;\n\n\t\t\t\treturn (\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tclassName={ style === 2 ? 'is-large' : '' }\n\t\t\t\t\t\tstyle={ { textAlign: align ? align : null } }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText.Content multiline value={ value } />\n\t\t\t\t\t\t{ ! RichText.isEmpty( citation ) && <RichText.Content tagName=\"cite\" value={ citation } /> }\n\t\t\t\t\t</blockquote>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tattributes: {\n\t\t\t\t...blockAttributes,\n\t\t\t\tcitation: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'html',\n\t\t\t\t\tselector: 'footer',\n\t\t\t\t\tdefault: '',\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\tdefault: 1,\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tsave( { attributes } ) {\n\t\t\t\tconst { align, value, citation, style } = attributes;\n\n\t\t\t\treturn (\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tclassName={ `blocks-quote-style-${ style }` }\n\t\t\t\t\t\tstyle={ { textAlign: align ? align : null } }\n\t\t\t\t\t>\n\t\t\t\t\t\t<RichText.Content multiline value={ value } />\n\t\t\t\t\t\t{ ! RichText.isEmpty( citation ) && <RichText.Content tagName=\"footer\" value={ citation } /> }\n\t\t\t\t\t</blockquote>\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t],\n};\n"]}