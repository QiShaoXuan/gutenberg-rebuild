{"version":3,"sources":["@wordpress/block-library/src/audio/index.js"],"names":["createBlobURL","createBlock","RichText","__","edit","icon","name","settings","title","description","category","attributes","src","type","source","selector","attribute","caption","id","autoplay","loop","preload","transforms","from","isMatch","files","length","indexOf","transform","file","block","tag","shortcode","named","supports","align","save","isEmpty"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlobURL } from '@wordpress/blob';\nimport { createBlock } from '@wordpress/blocks';\nimport { RichText } from '@wordpress/block-editor';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\n\nexport const name = 'core/audio';\n\nexport const settings = {\n\ttitle: __( 'Audio' ),\n\n\tdescription: __( 'Embed a simple audio player.' ),\n\n\ticon,\n\n\tcategory: 'common',\n\n\tattributes: {\n\t\tsrc: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'audio',\n\t\t\tattribute: 'src',\n\t\t},\n\t\tcaption: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: 'figcaption',\n\t\t},\n\t\tid: {\n\t\t\ttype: 'number',\n\t\t},\n\t\tautoplay: {\n\t\t\ttype: 'boolean',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'audio',\n\t\t\tattribute: 'autoplay',\n\t\t},\n\t\tloop: {\n\t\t\ttype: 'boolean',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'audio',\n\t\t\tattribute: 'loop',\n\t\t},\n\t\tpreload: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'attribute',\n\t\t\tselector: 'audio',\n\t\t\tattribute: 'preload',\n\t\t},\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'files',\n\t\t\t\tisMatch( files ) {\n\t\t\t\t\treturn files.length === 1 && files[ 0 ].type.indexOf( 'audio/' ) === 0;\n\t\t\t\t},\n\t\t\t\ttransform( files ) {\n\t\t\t\t\tconst file = files[ 0 ];\n\t\t\t\t\t// We don't need to upload the media directly here\n\t\t\t\t\t// It's already done as part of the `componentDidMount`\n\t\t\t\t\t// in the audio block\n\t\t\t\t\tconst block = createBlock( 'core/audio', {\n\t\t\t\t\t\tsrc: createBlobURL( file ),\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn block;\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'shortcode',\n\t\t\t\ttag: 'audio',\n\t\t\t\tattributes: {\n\t\t\t\t\tsrc: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { src } } ) => {\n\t\t\t\t\t\t\treturn src;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tloop: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { loop } } ) => {\n\t\t\t\t\t\t\treturn loop;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tautoplay: {\n\t\t\t\t\t\ttype: 'srting',\n\t\t\t\t\t\tshortcode: ( { named: { autoplay } } ) => {\n\t\t\t\t\t\t\treturn autoplay;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tpreload: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tshortcode: ( { named: { preload } } ) => {\n\t\t\t\t\t\t\treturn preload;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\n\tsupports: {\n\t\talign: true,\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst { autoplay, caption, loop, preload, src } = attributes;\n\t\treturn (\n\t\t\t<figure>\n\t\t\t\t<audio controls=\"controls\" src={ src } autoPlay={ autoplay } loop={ loop } preload={ preload } />\n\t\t\t\t{ ! RichText.isEmpty( caption ) && <RichText.Content tagName=\"figcaption\" value={ caption } /> }\n\t\t\t</figure>\n\t\t);\n\t},\n};\n"]}