{"version":3,"sources":["@wordpress/block-library/src/table/index.js"],"names":["classnames","__","_x","getPhrasingContentSchema","RichText","getColorClassName","edit","icon","tableContentPasteSchema","tr","allowEmpty","children","th","td","tablePasteSchema","table","thead","tfoot","tbody","getTableSectionAttributeSchema","section","type","default","source","selector","query","cells","content","tag","name","settings","title","description","category","attributes","hasFixedLayout","backgroundColor","head","body","foot","styles","label","isDefault","supports","align","transforms","from","schema","save","isEmpty","length","backgroundClass","classes","Section","rows","Tag","map","rowIndex","cellIndex"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\nimport { getPhrasingContentSchema } from '@wordpress/blocks';\nimport { RichText, getColorClassName } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport icon from './icon';\n\nconst tableContentPasteSchema = {\n\ttr: {\n\t\tallowEmpty: true,\n\t\tchildren: {\n\t\t\tth: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: getPhrasingContentSchema(),\n\t\t\t},\n\t\t\ttd: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: getPhrasingContentSchema(),\n\t\t\t},\n\t\t},\n\t},\n};\n\nconst tablePasteSchema = {\n\ttable: {\n\t\tchildren: {\n\t\t\tthead: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema,\n\t\t\t},\n\t\t\ttfoot: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema,\n\t\t\t},\n\t\t\ttbody: {\n\t\t\t\tallowEmpty: true,\n\t\t\t\tchildren: tableContentPasteSchema,\n\t\t\t},\n\t\t},\n\t},\n};\n\nfunction getTableSectionAttributeSchema( section ) {\n\treturn {\n\t\ttype: 'array',\n\t\tdefault: [],\n\t\tsource: 'query',\n\t\tselector: `t${ section } tr`,\n\t\tquery: {\n\t\t\tcells: {\n\t\t\t\ttype: 'array',\n\t\t\t\tdefault: [],\n\t\t\t\tsource: 'query',\n\t\t\t\tselector: 'td,th',\n\t\t\t\tquery: {\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tsource: 'html',\n\t\t\t\t\t},\n\t\t\t\t\ttag: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdefault: 'td',\n\t\t\t\t\t\tsource: 'tag',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n}\n\nexport const name = 'core/table';\n\nexport const settings = {\n\ttitle: __( 'Table' ),\n\tdescription: __( 'Insert a table â€” perfect for sharing charts and data.' ),\n\ticon,\n\tcategory: 'formatting',\n\n\tattributes: {\n\t\thasFixedLayout: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t\tbackgroundColor: {\n\t\t\ttype: 'string',\n\t\t},\n\t\thead: getTableSectionAttributeSchema( 'head' ),\n\t\tbody: getTableSectionAttributeSchema( 'body' ),\n\t\tfoot: getTableSectionAttributeSchema( 'foot' ),\n\t},\n\n\tstyles: [\n\t\t{ name: 'regular', label: _x( 'Default', 'block style' ), isDefault: true },\n\t\t{ name: 'stripes', label: __( 'Stripes' ) },\n\t],\n\n\tsupports: {\n\t\talign: true,\n\t},\n\n\ttransforms: {\n\t\tfrom: [\n\t\t\t{\n\t\t\t\ttype: 'raw',\n\t\t\t\tselector: 'table',\n\t\t\t\tschema: tablePasteSchema,\n\t\t\t},\n\t\t],\n\t},\n\n\tedit,\n\n\tsave( { attributes } ) {\n\t\tconst {\n\t\t\thasFixedLayout,\n\t\t\thead,\n\t\t\tbody,\n\t\t\tfoot,\n\t\t\tbackgroundColor,\n\t\t} = attributes;\n\t\tconst isEmpty = ! head.length && ! body.length && ! foot.length;\n\n\t\tif ( isEmpty ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst backgroundClass = getColorClassName( 'background-color', backgroundColor );\n\n\t\tconst classes = classnames( backgroundClass, {\n\t\t\t'has-fixed-layout': hasFixedLayout,\n\t\t\t'has-background': !! backgroundClass,\n\t\t} );\n\n\t\tconst Section = ( { type, rows } ) => {\n\t\t\tif ( ! rows.length ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst Tag = `t${ type }`;\n\n\t\t\treturn (\n\t\t\t\t<Tag>\n\t\t\t\t\t{ rows.map( ( { cells }, rowIndex ) => (\n\t\t\t\t\t\t<tr key={ rowIndex }>\n\t\t\t\t\t\t\t{ cells.map( ( { content, tag }, cellIndex ) =>\n\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\ttagName={ tag }\n\t\t\t\t\t\t\t\t\tvalue={ content }\n\t\t\t\t\t\t\t\t\tkey={ cellIndex }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) ) }\n\t\t\t\t</Tag>\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\t<table className={ classes }>\n\t\t\t\t<Section type=\"head\" rows={ head } />\n\t\t\t\t<Section type=\"body\" rows={ body } />\n\t\t\t\t<Section type=\"foot\" rows={ foot } />\n\t\t\t</table>\n\t\t);\n\t},\n};\n"]}