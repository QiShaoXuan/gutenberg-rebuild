{"version":3,"sources":["@wordpress/edit-post/src/components/manage-blocks-modal/manager.js"],"names":["BlockManager","search","setState","blockTypes","categories","hasBlockSupport","isMatchingSearchTerm","filter","blockType","nextSearch","length","map","category","slug","select","getBlockTypes","getCategories"],"mappings":";;;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AAKA;;AAhBA;;;;AAKA;;;;AAQA;;;AAKA,SAASA,YAAT,OAOI;AAAA,MANHC,MAMG,QANHA,MAMG;AAAA,MALHC,QAKG,QALHA,QAKG;AAAA,MAJHC,UAIG,QAJHA,UAIG;AAAA,MAHHC,UAGG,QAHHA,UAGG;AAAA,MAFHC,eAEG,QAFHA,eAEG;AAAA,MADHC,oBACG,QADHA,oBACG;AACH;AACA;AACA;AACAH,EAAAA,UAAU,GAAGA,UAAU,CAACI,MAAX,CAAmB,UAAEC,SAAF;AAAA,WAC/BH,eAAe,CAAEG,SAAF,EAAa,UAAb,EAAyB,IAAzB,CAAf,KACE,CAAEP,MAAF,IAAYK,oBAAoB,CAAEE,SAAF,EAAaP,MAAb,CADlC,CAD+B;AAAA,GAAnB,CAAb;AAKA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,uBAAD;AACC,IAAA,IAAI,EAAC,QADN;AAEC,IAAA,KAAK,EAAG,cAAI,oBAAJ,CAFT;AAGC,IAAA,KAAK,EAAGA,MAHT;AAIC,IAAA,QAAQ,EAAG,kBAAEQ,UAAF;AAAA,aAAkBP,QAAQ,CAAE;AACtCD,QAAAA,MAAM,EAAEQ;AAD8B,OAAF,CAA1B;AAAA,KAJZ;AAOC,IAAA,SAAS,EAAC;AAPX,IADD,EAUC;AACC,IAAA,QAAQ,EAAC,GADV;AAEC,IAAA,IAAI,EAAC,QAFN;AAGC,kBAAa,cAAI,uBAAJ,CAHd;AAIC,IAAA,SAAS,EAAC;AAJX,KAMGN,UAAU,CAACO,MAAX,KAAsB,CAAtB,IACD;AAAG,IAAA,SAAS,EAAC;AAAb,KACG,cAAI,kBAAJ,CADH,CAPF,EAWGN,UAAU,CAACO,GAAX,CAAgB,UAAEC,QAAF;AAAA,WACjB,4BAAC,iBAAD;AACC,MAAA,GAAG,EAAGA,QAAQ,CAACC,IADhB;AAEC,MAAA,QAAQ,EAAGD,QAFZ;AAGC,MAAA,UAAU,EAAG,oBAAQT,UAAR,EAAoB;AAChCS,QAAAA,QAAQ,EAAEA,QAAQ,CAACC;AADa,OAApB;AAHd,MADiB;AAAA,GAAhB,CAXH,CAVD,CADD;AAkCA;;eAEc,sBAAS,CACvB,wBAAW;AAAEZ,EAAAA,MAAM,EAAE;AAAV,CAAX,CADuB,EAEvB,sBAAY,UAAEa,MAAF,EAAc;AAAA,gBAMrBA,MAAM,CAAE,aAAF,CANe;AAAA,MAExBC,aAFwB,WAExBA,aAFwB;AAAA,MAGxBC,aAHwB,WAGxBA,aAHwB;AAAA,MAIxBX,eAJwB,WAIxBA,eAJwB;AAAA,MAKxBC,oBALwB,WAKxBA,oBALwB;;AAQzB,SAAO;AACNH,IAAAA,UAAU,EAAEY,aAAa,EADnB;AAENX,IAAAA,UAAU,EAAEY,aAAa,EAFnB;AAGNX,IAAAA,eAAe,EAAfA,eAHM;AAINC,IAAAA,oBAAoB,EAApBA;AAJM,GAAP;AAMA,CAdD,CAFuB,CAAT,EAiBVN,YAjBU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { compose, withState } from '@wordpress/compose';\nimport { TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockManagerCategory from './category';\n\nfunction BlockManager( {\n\tsearch,\n\tsetState,\n\tblockTypes,\n\tcategories,\n\thasBlockSupport,\n\tisMatchingSearchTerm,\n} ) {\n\t// Filtering occurs here (as opposed to `withSelect`) to avoid wasted\n\t// wasted renders by consequence of `Array#filter` producing a new\n\t// value reference on each call.\n\tblockTypes = blockTypes.filter( ( blockType ) => (\n\t\thasBlockSupport( blockType, 'inserter', true ) &&\n\t\t( ! search || isMatchingSearchTerm( blockType, search ) )\n\t) );\n\n\treturn (\n\t\t<div className=\"edit-post-manage-blocks-modal__content\">\n\t\t\t<TextControl\n\t\t\t\ttype=\"search\"\n\t\t\t\tlabel={ __( 'Search for a block' ) }\n\t\t\t\tvalue={ search }\n\t\t\t\tonChange={ ( nextSearch ) => setState( {\n\t\t\t\t\tsearch: nextSearch,\n\t\t\t\t} ) }\n\t\t\t\tclassName=\"edit-post-manage-blocks-modal__search\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"region\"\n\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\tclassName=\"edit-post-manage-blocks-modal__results\"\n\t\t\t>\n\t\t\t\t{ blockTypes.length === 0 && (\n\t\t\t\t\t<p className=\"edit-post-manage-blocks-modal__no-results\">\n\t\t\t\t\t\t{ __( 'No blocks found.' ) }\n\t\t\t\t\t</p>\n\t\t\t\t) }\n\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t<BlockManagerCategory\n\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\tblockTypes={ filter( blockTypes, {\n\t\t\t\t\t\t\tcategory: category.slug,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithState( { search: '' } ),\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockTypes,\n\t\t\tgetCategories,\n\t\t\thasBlockSupport,\n\t\t\tisMatchingSearchTerm,\n\t\t} = select( 'core/blocks' );\n\n\t\treturn {\n\t\t\tblockTypes: getBlockTypes(),\n\t\t\tcategories: getCategories(),\n\t\t\thasBlockSupport,\n\t\t\tisMatchingSearchTerm,\n\t\t};\n\t} ),\n] )( BlockManager );\n"]}