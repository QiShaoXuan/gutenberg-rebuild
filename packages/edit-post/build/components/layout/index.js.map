{"version":3,"sources":["@wordpress/edit-post/src/components/layout/index.js"],"names":["Layout","mode","editorSidebarOpened","pluginSidebarOpened","publishSidebarOpened","hasFixedToolbar","closePublishSidebar","togglePublishSidebar","hasActiveMetaboxes","isSaving","isMobileViewport","isRichEditingEnabled","sidebarIsOpened","className","publishLandmarkProps","role","tabIndex","PluginPrePublishPanel","Slot","PluginPostPublishPanel","select","getEditorMode","isEditorSidebarOpened","isPluginSidebarOpened","isPublishSidebarOpened","isFeatureActive","hasMetaBoxes","isSavingMetaBoxes","getEditorSettings","richEditingEnabled","dispatch","navigateRegions"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tPopover,\n\tScrollLock,\n\tFocusReturnProvider,\n\tnavigateRegions,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { PreserveScrollInReorder } from '@wordpress/block-editor';\nimport {\n\tAutosaveMonitor,\n\tUnsavedChangesWarning,\n\tEditorNotices,\n\tPostPublishPanel,\n} from '@wordpress/editor';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Fragment } from '@wordpress/element';\nimport { PluginArea } from '@wordpress/plugins';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BrowserURL from '../browser-url';\nimport Header from '../header';\nimport TextEditor from '../text-editor';\nimport VisualEditor from '../visual-editor';\nimport EditorModeKeyboardShortcuts from '../keyboard-shortcuts';\nimport KeyboardShortcutHelpModal from '../keyboard-shortcut-help-modal';\nimport ManageBlocksModal from '../manage-blocks-modal';\nimport OptionsModal from '../options-modal';\nimport MetaBoxes from '../meta-boxes';\nimport SettingsSidebar from '../sidebar/settings-sidebar';\nimport Sidebar from '../sidebar';\nimport PluginPostPublishPanel from '../sidebar/plugin-post-publish-panel';\nimport PluginPrePublishPanel from '../sidebar/plugin-pre-publish-panel';\nimport FullscreenMode from '../fullscreen-mode';\n\nfunction Layout( {\n\tmode,\n\teditorSidebarOpened,\n\tpluginSidebarOpened,\n\tpublishSidebarOpened,\n\thasFixedToolbar,\n\tclosePublishSidebar,\n\ttogglePublishSidebar,\n\thasActiveMetaboxes,\n\tisSaving,\n\tisMobileViewport,\n\tisRichEditingEnabled,\n} ) {\n\tconst sidebarIsOpened = editorSidebarOpened || pluginSidebarOpened || publishSidebarOpened;\n\n\tconst className = classnames( 'edit-post-layout', {\n\t\t'is-sidebar-opened': sidebarIsOpened,\n\t\t'has-fixed-toolbar': hasFixedToolbar,\n\t} );\n\n\tconst publishLandmarkProps = {\n\t\trole: 'region',\n\t\t/* translators: accessibility text for the publish landmark region. */\n\t\t'aria-label': __( 'Editor publish' ),\n\t\ttabIndex: -1,\n\t};\n\treturn (\n\t\t<FocusReturnProvider className={ className }>\n\t\t\t<FullscreenMode />\n\t\t\t<BrowserURL />\n\t\t\t<UnsavedChangesWarning />\n\t\t\t<AutosaveMonitor />\n\t\t\t<Header />\n\t\t\t<div\n\t\t\t\tclassName=\"edit-post-layout__content\"\n\t\t\t\trole=\"region\"\n\t\t\t\t/* translators: accessibility text for the content landmark region. */\n\t\t\t\taria-label={ __( 'Editor content' ) }\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t>\n\t\t\t\t<EditorNotices dismissible={ false } className=\"is-pinned\" />\n\t\t\t\t<EditorNotices dismissible={ true } />\n\t\t\t\t<PreserveScrollInReorder />\n\t\t\t\t<EditorModeKeyboardShortcuts />\n\t\t\t\t<KeyboardShortcutHelpModal />\n\t\t\t\t<ManageBlocksModal />\n\t\t\t\t<OptionsModal />\n\t\t\t\t{ ( mode === 'text' || ! isRichEditingEnabled ) && <TextEditor /> }\n\t\t\t\t{ isRichEditingEnabled && mode === 'visual' && <VisualEditor /> }\n\t\t\t\t<div className=\"edit-post-layout__metaboxes\">\n\t\t\t\t\t<MetaBoxes location=\"normal\" />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"edit-post-layout__metaboxes\">\n\t\t\t\t\t<MetaBoxes location=\"advanced\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ publishSidebarOpened ? (\n\t\t\t\t<PostPublishPanel\n\t\t\t\t\t{ ...publishLandmarkProps }\n\t\t\t\t\tonClose={ closePublishSidebar }\n\t\t\t\t\tforceIsDirty={ hasActiveMetaboxes }\n\t\t\t\t\tforceIsSaving={ isSaving }\n\t\t\t\t\tPrePublishExtension={ PluginPrePublishPanel.Slot }\n\t\t\t\t\tPostPublishExtension={ PluginPostPublishPanel.Slot }\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div className=\"edit-post-toggle-publish-panel\" { ...publishLandmarkProps }>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisDefault\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"edit-post-toggle-publish-panel__button\"\n\t\t\t\t\t\t\tonClick={ togglePublishSidebar }\n\t\t\t\t\t\t\taria-expanded={ false }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Open publish panel' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<SettingsSidebar />\n\t\t\t\t\t<Sidebar.Slot />\n\t\t\t\t\t{\n\t\t\t\t\t\tisMobileViewport && sidebarIsOpened && <ScrollLock />\n\t\t\t\t\t}\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t\t<Popover.Slot />\n\t\t\t<PluginArea />\n\t\t</FocusReturnProvider>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => ( {\n\t\tmode: select( 'core/edit-post' ).getEditorMode(),\n\t\teditorSidebarOpened: select( 'core/edit-post' ).isEditorSidebarOpened(),\n\t\tpluginSidebarOpened: select( 'core/edit-post' ).isPluginSidebarOpened(),\n\t\tpublishSidebarOpened: select( 'core/edit-post' ).isPublishSidebarOpened(),\n\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive( 'fixedToolbar' ),\n\t\thasActiveMetaboxes: select( 'core/edit-post' ).hasMetaBoxes(),\n\t\tisSaving: select( 'core/edit-post' ).isSavingMetaBoxes(),\n\t\tisRichEditingEnabled: select( 'core/editor' ).getEditorSettings().richEditingEnabled,\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { closePublishSidebar, togglePublishSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\tclosePublishSidebar,\n\t\t\ttogglePublishSidebar,\n\t\t};\n\t} ),\n\tnavigateRegions,\n\twithViewportMatch( { isMobileViewport: '< small' } ),\n)( Layout );\n"]}