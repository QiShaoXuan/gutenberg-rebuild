{"version":3,"sources":["@wordpress/edit-post/src/store/selectors.js"],"names":["createSelector","get","includes","some","flatten","values","getEditorMode","state","getPreference","isEditorSidebarOpened","activeGeneralSidebar","getActiveGeneralSidebarName","isPluginSidebarOpened","isDismissed","getPreferences","preferences","preferenceKey","defaultValue","value","undefined","isPublishSidebarOpened","publishSidebarActive","isEditorPanelRemoved","panelName","removedPanels","isEditorPanelEnabled","panels","isEditorPanelOpened","isModalActive","modalName","activeModal","isFeatureActive","feature","features","isPluginItemPinned","pluginName","pinnedPluginItems","getActiveMetaBoxLocations","Object","keys","metaBoxes","locations","filter","location","isMetaBoxLocationActive","isMetaBoxLocationVisible","getMetaBoxesPerLocation","id","length","getAllMetaBoxes","hasMetaBoxes","isSavingMetaBoxes","isSaving"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport createSelector from 'rememo';\nimport { get, includes, some, flatten, values } from 'lodash';\n\n/**\n * Returns the current editing mode.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Editing mode.\n */\nexport function getEditorMode( state ) {\n\treturn getPreference( state, 'editorMode', 'visual' );\n}\n\n/**\n * Returns true if the editor sidebar is opened.\n *\n * @param {Object} state Global application state\n *\n * @return {boolean} Whether the editor sidebar is opened.\n */\nexport function isEditorSidebarOpened( state ) {\n\tconst activeGeneralSidebar = getActiveGeneralSidebarName( state );\n\n\treturn includes( [ 'edit-post/document', 'edit-post/block' ], activeGeneralSidebar );\n}\n\n/**\n * Returns true if the plugin sidebar is opened.\n *\n * @param {Object} state Global application state\n * @return {boolean}     Whether the plugin sidebar is opened.\n */\nexport function isPluginSidebarOpened( state ) {\n\tconst activeGeneralSidebar = getActiveGeneralSidebarName( state );\n\treturn !! activeGeneralSidebar && ! isEditorSidebarOpened( state );\n}\n\n/**\n * Returns the current active general sidebar name, or null if there is no\n * general sidebar active. The active general sidebar is a unique name to\n * identify either an editor or plugin sidebar.\n *\n * Examples:\n *\n *  - `edit-post/document`\n *  - `my-plugin/insert-image-sidebar`\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Active general sidebar name.\n */\nexport function getActiveGeneralSidebarName( state ) {\n\t// Dismissal takes precedent.\n\tconst isDismissed = getPreference( state, 'isGeneralSidebarDismissed', false );\n\tif ( isDismissed ) {\n\t\treturn null;\n\t}\n\n\treturn state.activeGeneralSidebar;\n}\n\n/**\n * Returns the preferences (these preferences are persisted locally).\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Preferences Object.\n */\nexport function getPreferences( state ) {\n\treturn state.preferences;\n}\n\n/**\n *\n * @param {Object} state         Global application state.\n * @param {string} preferenceKey Preference Key.\n * @param {Mixed}  defaultValue  Default Value.\n *\n * @return {Mixed} Preference Value.\n */\nexport function getPreference( state, preferenceKey, defaultValue ) {\n\tconst preferences = getPreferences( state );\n\tconst value = preferences[ preferenceKey ];\n\treturn value === undefined ? defaultValue : value;\n}\n\n/**\n * Returns true if the publish sidebar is opened.\n *\n * @param {Object} state Global application state\n *\n * @return {boolean} Whether the publish sidebar is open.\n */\nexport function isPublishSidebarOpened( state ) {\n\treturn state.publishSidebarActive;\n}\n\n/**\n * Returns true if the given panel was programmatically removed, or false otherwise.\n * All panels are not removed by default.\n *\n * @param {Object} state     Global application state.\n * @param {string} panelName A string that identifies the panel.\n *\n * @return {boolean} Whether or not the panel is removed.\n */\nexport function isEditorPanelRemoved( state, panelName ) {\n\treturn includes( state.removedPanels, panelName );\n}\n\n/**\n * Returns true if the given panel is enabled, or false otherwise. Panels are\n * enabled by default.\n *\n * @param {Object} state     Global application state.\n * @param {string} panelName A string that identifies the panel.\n *\n * @return {boolean} Whether or not the panel is enabled.\n */\nexport function isEditorPanelEnabled( state, panelName ) {\n\tconst panels = getPreference( state, 'panels' );\n\n\treturn ! isEditorPanelRemoved( state, panelName ) &&\n\t\tget( panels, [ panelName, 'enabled' ], true );\n}\n\n/**\n * Returns true if the given panel is open, or false otherwise. Panels are\n * closed by default.\n *\n * @param  {Object}  state     Global application state.\n * @param  {string}  panelName A string that identifies the panel.\n *\n * @return {boolean} Whether or not the panel is open.\n */\nexport function isEditorPanelOpened( state, panelName ) {\n\tconst panels = getPreference( state, 'panels' );\n\treturn (\n\t\tget( panels, [ panelName ] ) === true ||\n\t\tget( panels, [ panelName, 'opened' ] ) === true\n\t);\n}\n\n/**\n * Returns true if a modal is active, or false otherwise.\n *\n * @param  {Object}  state \t   Global application state.\n * @param  {string}  modalName A string that uniquely identifies the modal.\n *\n * @return {boolean} Whether the modal is active.\n */\nexport function isModalActive( state, modalName ) {\n\treturn state.activeModal === modalName;\n}\n\n/**\n * Returns whether the given feature is enabled or not.\n *\n * @param {Object} state   Global application state.\n * @param {string} feature Feature slug.\n *\n * @return {boolean} Is active.\n */\nexport function isFeatureActive( state, feature ) {\n\treturn get( state.preferences.features, [ feature ], false );\n}\n\n/**\n * Returns true if the plugin item is pinned to the header.\n * When the value is not set it defaults to true.\n *\n * @param  {Object}  state      Global application state.\n * @param  {string}  pluginName Plugin item name.\n *\n * @return {boolean} Whether the plugin item is pinned.\n */\nexport function isPluginItemPinned( state, pluginName ) {\n\tconst pinnedPluginItems = getPreference( state, 'pinnedPluginItems', {} );\n\n\treturn get( pinnedPluginItems, [ pluginName ], true );\n}\n\n/**\n * Returns an array of active meta box locations.\n *\n * @param {Object} state Post editor state.\n *\n * @return {string[]} Active meta box locations.\n */\nexport const getActiveMetaBoxLocations = createSelector(\n\t( state ) => {\n\t\treturn Object.keys( state.metaBoxes.locations )\n\t\t\t.filter( ( location ) => isMetaBoxLocationActive( state, location ) );\n\t},\n\t( state ) => [\n\t\tstate.metaBoxes.locations,\n\t]\n);\n\n/**\n * Returns true if a metabox location is active and visible\n *\n * @param {Object} state    Post editor state.\n * @param {string} location Meta box location to test.\n *\n * @return {boolean} Whether the meta box location is active and visible.\n */\nexport function isMetaBoxLocationVisible( state, location ) {\n\treturn (\n\t\tisMetaBoxLocationActive( state, location ) &&\n\t\tsome( getMetaBoxesPerLocation( state, location ), ( { id } ) => {\n\t\t\treturn isEditorPanelEnabled( state, `meta-box-${ id }` );\n\t\t} )\n\t);\n}\n\n/**\n * Returns true if there is an active meta box in the given location, or false\n * otherwise.\n *\n * @param {Object} state    Post editor state.\n * @param {string} location Meta box location to test.\n *\n * @return {boolean} Whether the meta box location is active.\n */\nexport function isMetaBoxLocationActive( state, location ) {\n\tconst metaBoxes = getMetaBoxesPerLocation( state, location );\n\treturn !! metaBoxes && metaBoxes.length !== 0;\n}\n\n/**\n * Returns the list of all the available meta boxes for a given location.\n *\n * @param {Object} state    Global application state.\n * @param {string} location Meta box location to test.\n *\n * @return {?Array} List of meta boxes.\n */\nexport function getMetaBoxesPerLocation( state, location ) {\n\treturn state.metaBoxes.locations[ location ];\n}\n\n/**\n * Returns the list of all the available meta boxes.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} List of meta boxes.\n */\nexport const getAllMetaBoxes = createSelector(\n\t( state ) => {\n\t\treturn flatten( values( state.metaBoxes.locations ) );\n\t},\n\t( state ) => [\n\t\tstate.metaBoxes.locations,\n\t]\n);\n\n/**\n * Returns true if the post is using Meta Boxes\n *\n * @param  {Object} state Global application state\n *\n * @return {boolean} Whether there are metaboxes or not.\n */\nexport function hasMetaBoxes( state ) {\n\treturn getActiveMetaBoxLocations( state ).length > 0;\n}\n\n/**\n * Returns true if the Meta Boxes are being saved.\n *\n * @param   {Object}  state Global application state.\n *\n * @return {boolean} Whether the metaboxes are being saved.\n */\nexport function isSavingMetaBoxes( state ) {\n\treturn state.metaBoxes.isSaving;\n}\n"]}