{"version":3,"sources":["@wordpress/edit-post/src/store/reducer.js"],"names":["get","includes","flow","without","union","combineReducers","PREFERENCES_DEFAULTS","DEFAULT_ACTIVE_GENERAL_SIDEBAR","createWithInitialState","initialState","reducer","state","action","preferences","isGeneralSidebarDismissed","type","panels","panelName","enabled","isOpen","opened","features","feature","editorMode","mode","pinnedPluginItems","pluginName","hiddenBlockTypes","blockNames","removedPanels","activeGeneralSidebar","name","activeModal","publishSidebarActive","isSavingMetaBoxes","metaBoxLocations","metaBoxesPerLocation","metaBoxes","isSaving","locations"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { get, includes, flow, without, union } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { PREFERENCES_DEFAULTS } from './defaults';\n\n/**\n * The default active general sidebar: The \"Document\" tab.\n *\n * @type {string}\n */\nexport const DEFAULT_ACTIVE_GENERAL_SIDEBAR = 'edit-post/document';\n\n/**\n * Higher-order reducer creator which provides the given initial state for the\n * original reducer.\n *\n * @param {*} initialState Initial state to provide to reducer.\n *\n * @return {Function} Higher-order reducer.\n */\nconst createWithInitialState = ( initialState ) => ( reducer ) => {\n\treturn ( state = initialState, action ) => reducer( state, action );\n};\n\n/**\n * Reducer returning the user preferences.\n *\n * @param {Object}  state                           Current state.\n * @param {string}  state.mode                      Current editor mode, either\n *                                                  \"visual\" or \"text\".\n * @param {boolean} state.isGeneralSidebarDismissed Whether general sidebar is\n *                                                  dismissed. False by default\n *                                                  or when closing general\n *                                                  sidebar, true when opening\n *                                                  sidebar.\n * @param {boolean} state.isSidebarOpened           Whether the sidebar is\n *                                                  opened or closed.\n * @param {Object}  state.panels                    The state of the different\n *                                                  sidebar panels.\n * @param {Object}  action                          Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const preferences = flow( [\n\tcombineReducers,\n\tcreateWithInitialState( PREFERENCES_DEFAULTS ),\n] )( {\n\tisGeneralSidebarDismissed( state, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'OPEN_GENERAL_SIDEBAR':\n\t\t\tcase 'CLOSE_GENERAL_SIDEBAR':\n\t\t\t\treturn action.type === 'CLOSE_GENERAL_SIDEBAR';\n\t\t}\n\n\t\treturn state;\n\t},\n\tpanels( state, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'TOGGLE_PANEL_ENABLED': {\n\t\t\t\tconst { panelName } = action;\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ panelName ]: {\n\t\t\t\t\t\t...state[ panelName ],\n\t\t\t\t\t\tenabled: ! get( state, [ panelName, 'enabled' ], true ),\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'TOGGLE_PANEL_OPENED': {\n\t\t\t\tconst { panelName } = action;\n\t\t\t\tconst isOpen = state[ panelName ] === true || get( state, [ panelName, 'opened' ], false );\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ panelName ]: {\n\t\t\t\t\t\t...state[ panelName ],\n\t\t\t\t\t\topened: ! isOpen,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\tfeatures( state, action ) {\n\t\tif ( action.type === 'TOGGLE_FEATURE' ) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.feature ]: ! state[ action.feature ],\n\t\t\t};\n\t\t}\n\n\t\treturn state;\n\t},\n\teditorMode( state, action ) {\n\t\tif ( action.type === 'SWITCH_MODE' ) {\n\t\t\treturn action.mode;\n\t\t}\n\n\t\treturn state;\n\t},\n\tpinnedPluginItems( state, action ) {\n\t\tif ( action.type === 'TOGGLE_PINNED_PLUGIN_ITEM' ) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.pluginName ]: ! get( state, [ action.pluginName ], true ),\n\t\t\t};\n\t\t}\n\t\treturn state;\n\t},\n\thiddenBlockTypes( state, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'SHOW_BLOCK_TYPES':\n\t\t\t\treturn without( state, ...action.blockNames );\n\n\t\t\tcase 'HIDE_BLOCK_TYPES':\n\t\t\t\treturn union( state, action.blockNames );\n\t\t}\n\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer storing the list of all programmatically removed panels.\n *\n * @param {Array}  state  Current state.\n * @param {Object} action Action object.\n *\n * @return {Array} Updated state.\n */\nexport function removedPanels( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REMOVE_PANEL':\n\t\t\tif ( ! includes( state, action.panelName ) ) {\n\t\t\t\treturn [\n\t\t\t\t\t...state,\n\t\t\t\t\taction.panelName,\n\t\t\t\t];\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the next active general sidebar state. The active general\n * sidebar is a unique name to identify either an editor or plugin sidebar.\n *\n * @param {?string} state  Current state.\n * @param {Object}  action Action object.\n *\n * @return {?string} Updated state.\n */\nexport function activeGeneralSidebar( state = DEFAULT_ACTIVE_GENERAL_SIDEBAR, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'OPEN_GENERAL_SIDEBAR':\n\t\t\treturn action.name;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer for storing the name of the open modal, or null if no modal is open.\n *\n * @param {Object} state  Previous state.\n * @param {Object} action Action object containing the `name` of the modal\n *\n * @return {Object} Updated state\n */\nexport function activeModal( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'OPEN_MODAL':\n\t\t\treturn action.name;\n\t\tcase 'CLOSE_MODAL':\n\t\t\treturn null;\n\t}\n\n\treturn state;\n}\n\nexport function publishSidebarActive( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'OPEN_PUBLISH_SIDEBAR':\n\t\t\treturn true;\n\t\tcase 'CLOSE_PUBLISH_SIDEBAR':\n\t\t\treturn false;\n\t\tcase 'TOGGLE_PUBLISH_SIDEBAR':\n\t\t\treturn ! state;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer keeping track of the meta boxes isSaving state.\n * A \"true\" value means the meta boxes saving request is in-flight.\n *\n *\n * @param {boolean}  state   Previous state.\n * @param {Object}   action  Action Object.\n *\n * @return {Object} Updated state.\n */\nexport function isSavingMetaBoxes( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REQUEST_META_BOX_UPDATES':\n\t\t\treturn true;\n\t\tcase 'META_BOX_UPDATES_SUCCESS':\n\t\t\treturn false;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n/**\n * Reducer keeping track of the meta boxes per location.\n *\n * @param {boolean}  state   Previous state.\n * @param {Object}   action  Action Object.\n *\n * @return {Object} Updated state.\n */\nexport function metaBoxLocations( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_META_BOXES_PER_LOCATIONS':\n\t\t\treturn action.metaBoxesPerLocation;\n\t}\n\n\treturn state;\n}\n\nconst metaBoxes = combineReducers( {\n\tisSaving: isSavingMetaBoxes,\n\tlocations: metaBoxLocations,\n} );\n\nexport default combineReducers( {\n\tactiveGeneralSidebar,\n\tactiveModal,\n\tmetaBoxes,\n\tpreferences,\n\tpublishSidebarActive,\n\tremovedPanels,\n} );\n"]}