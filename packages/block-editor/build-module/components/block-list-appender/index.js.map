{"version":3,"sources":["@wordpress/block-editor/src/components/block-list-appender/index.js"],"names":["last","withSelect","getDefaultBlockName","__","IconButton","IgnoreNestedEvents","DefaultBlockAppender","Inserter","BlockListAppender","blockClientIds","rootClientId","canInsertDefaultBlock","isLocked","onToggle","disabled","isOpen","select","getBlockOrder","canInsertBlockType","getTemplateLock"],"mappings":";;AAAA;;;AAGA,SAASA,IAAT,QAAqB,QAArB;AAEA;;;;AAGA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,mBAAT,QAAoC,mBAApC;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AAEA;;;;AAGA,OAAOC,kBAAP,MAA+B,yBAA/B;AACA,OAAOC,oBAAP,MAAiC,2BAAjC;AACA,OAAOC,QAAP,MAAqB,aAArB;;AAEA,SAASC,iBAAT,OAKI;AAAA,MAJHC,cAIG,QAJHA,cAIG;AAAA,MAHHC,YAGG,QAHHA,YAGG;AAAA,MAFHC,qBAEG,QAFHA,qBAEG;AAAA,MADHC,QACG,QADHA,QACG;;AACH,MAAKA,QAAL,EAAgB;AACf,WAAO,IAAP;AACA;;AAED,MAAKD,qBAAL,EAA6B;AAC5B,WACC,cAAC,kBAAD;AAAoB,MAAA,kBAAkB,EAAG,CAAE,SAAF,EAAa,SAAb,EAAwB,WAAxB;AAAzC,OACC,cAAC,oBAAD;AACC,MAAA,YAAY,EAAGD,YADhB;AAEC,MAAA,iBAAiB,EAAGV,IAAI,CAAES,cAAF;AAFzB,MADD,CADD;AAQA;;AAED,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,QAAD;AACC,IAAA,YAAY,EAAGC,YADhB;AAEC,IAAA,YAAY,EAAG;AAAA,UAAIG,QAAJ,SAAIA,QAAJ;AAAA,UAAcC,QAAd,SAAcA,QAAd;AAAA,UAAwBC,MAAxB,SAAwBA,MAAxB;AAAA,aACd,cAAC,UAAD;AACC,QAAA,KAAK,EAAGZ,EAAE,CAAE,WAAF,CADX;AAEC,QAAA,IAAI,EAAC,QAFN;AAGC,QAAA,OAAO,EAAGU,QAHX;AAIC,QAAA,SAAS,EAAC,6BAJX;AAKC,yBAAc,MALf;AAMC,yBAAgBE,MANjB;AAOC,QAAA,QAAQ,EAAGD;AAPZ,QADc;AAAA,KAFhB;AAaC,IAAA,UAAU;AAbX,IADD,CADD;AAmBA;;AAED,eAAeb,UAAU,CAAE,UAAEe,MAAF,SAAgC;AAAA,MAApBN,YAAoB,SAApBA,YAAoB;;AAAA,gBAKtDM,MAAM,CAAE,mBAAF,CALgD;AAAA,MAEzDC,aAFyD,WAEzDA,aAFyD;AAAA,MAGzDC,kBAHyD,WAGzDA,kBAHyD;AAAA,MAIzDC,eAJyD,WAIzDA,eAJyD;;AAO1D,SAAO;AACNP,IAAAA,QAAQ,EAAE,CAAC,CAAEO,eAAe,CAAET,YAAF,CADtB;AAEND,IAAAA,cAAc,EAAEQ,aAAa,CAAEP,YAAF,CAFvB;AAGNC,IAAAA,qBAAqB,EAAEO,kBAAkB,CAAEhB,mBAAmB,EAArB,EAAyBQ,YAAzB;AAHnC,GAAP;AAKA,CAZwB,CAAV,CAYVF,iBAZU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { IconButton } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport IgnoreNestedEvents from '../ignore-nested-events';\nimport DefaultBlockAppender from '../default-block-appender';\nimport Inserter from '../inserter';\n\nfunction BlockListAppender( {\n\tblockClientIds,\n\trootClientId,\n\tcanInsertDefaultBlock,\n\tisLocked,\n} ) {\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\tif ( canInsertDefaultBlock ) {\n\t\treturn (\n\t\t\t<IgnoreNestedEvents childHandledEvents={ [ 'onFocus', 'onClick', 'onKeyDown' ] }>\n\t\t\t\t<DefaultBlockAppender\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tlastBlockClientId={ last( blockClientIds ) }\n\t\t\t\t/>\n\t\t\t</IgnoreNestedEvents>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"block-list-appender\">\n\t\t\t<Inserter\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\trenderToggle={ ( { onToggle, disabled, isOpen } ) => (\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tlabel={ __( 'Add block' ) }\n\t\t\t\t\t\ticon=\"insert\"\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\tisAppender\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select, { rootClientId } ) => {\n\tconst {\n\t\tgetBlockOrder,\n\t\tcanInsertBlockType,\n\t\tgetTemplateLock,\n\t} = select( 'core/block-editor' );\n\n\treturn {\n\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\tblockClientIds: getBlockOrder( rootClientId ),\n\t\tcanInsertDefaultBlock: canInsertBlockType( getDefaultBlockName(), rootClientId ),\n\t};\n} )( BlockListAppender );\n"]}