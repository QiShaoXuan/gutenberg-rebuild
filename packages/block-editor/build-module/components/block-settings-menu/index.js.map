{"version":3,"sources":["@wordpress/block-editor/src/components/block-settings-menu/index.js"],"names":["classnames","castArray","__","Fragment","Toolbar","Dropdown","NavigableMenu","MenuItem","withDispatch","shortcuts","BlockActions","BlockModeToggle","BlockHTMLConvertButton","BlockUnknownConvertButton","__experimentalBlockSettingsMenuFirstItem","__experimentalBlockSettingsMenuPluginsExtension","BlockSettingsMenu","clientIds","onSelect","blockClientIds","count","length","firstBlockClientId","onDuplicate","onRemove","onInsertAfter","onInsertBefore","canDuplicate","isLocked","onToggle","isOpen","toggleClassname","label","icon","title","onClick","className","extraProps","onClose","duplicate","display","insertBefore","insertAfter","removeBlock","dispatch","selectBlock","clientId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { castArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { Toolbar, Dropdown, NavigableMenu, MenuItem } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { shortcuts } from '../block-editor-keyboard-shortcuts';\nimport BlockActions from '../block-actions';\nimport BlockModeToggle from './block-mode-toggle';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport BlockUnknownConvertButton from './block-unknown-convert-button';\nimport __experimentalBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport __experimentalBlockSettingsMenuPluginsExtension from './block-settings-menu-plugins-extension';\n\nexport function BlockSettingsMenu( { clientIds, onSelect } ) {\n\tconst blockClientIds = castArray( clientIds );\n\tconst count = blockClientIds.length;\n\tconst firstBlockClientId = blockClientIds[ 0 ];\n\n\treturn (\n\t\t<BlockActions clientIds={ clientIds }>\n\t\t\t{ ( { onDuplicate, onRemove, onInsertAfter, onInsertBefore, canDuplicate, isLocked } ) => (\n\t\t\t\t<Dropdown\n\t\t\t\t\tcontentClassName=\"editor-block-settings-menu__popover block-editor-block-settings-menu__popover\"\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\t\tconst toggleClassname = classnames( 'editor-block-settings-menu__toggle block-editor-block-settings-menu__toggle', {\n\t\t\t\t\t\t\t'is-opened': isOpen,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tconst label = isOpen ? __( 'Hide options' ) : __( 'More options' );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Toolbar controls={ [ {\n\t\t\t\t\t\t\t\ticon: 'ellipsis',\n\t\t\t\t\t\t\t\ttitle: label,\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tif ( count === 1 ) {\n\t\t\t\t\t\t\t\t\t\tonSelect( firstBlockClientId );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclassName: toggleClassname,\n\t\t\t\t\t\t\t\textraProps: { 'aria-expanded': isOpen },\n\t\t\t\t\t\t\t} ] } />\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t\t<NavigableMenu className=\"editor-block-settings-menu__content block-editor-block-settings-menu__content\">\n\t\t\t\t\t\t\t<__experimentalBlockSettingsMenuFirstItem.Slot fillProps={ { onClose } } />\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockUnknownConvertButton\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! isLocked && canDuplicate && (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\tonClick={ onDuplicate }\n\t\t\t\t\t\t\t\t\ticon=\"admin-page\"\n\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate.display }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\t\tonClick={ onInsertBefore }\n\t\t\t\t\t\t\t\t\t\ticon=\"insert-before\"\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertBefore.display }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Insert Before' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\t\tonClick={ onInsertAfter }\n\t\t\t\t\t\t\t\t\t\ticon=\"insert-after\"\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertAfter.display }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Insert After' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<__experimentalBlockSettingsMenuPluginsExtension.Slot fillProps={ { clientIds, onClose } } />\n\t\t\t\t\t\t\t<div className=\"editor-block-settings-menu__separator block-editor-block-settings-menu__separator\" />\n\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.removeBlock.display }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Remove Block' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default withDispatch( ( dispatch ) => {\n\tconst { selectBlock } = dispatch( 'core/block-editor' );\n\n\treturn {\n\t\tonSelect( clientId ) {\n\t\t\tselectBlock( clientId );\n\t\t},\n\t};\n} )( BlockSettingsMenu );\n"]}