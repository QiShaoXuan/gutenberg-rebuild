{"version":3,"sources":["@wordpress/block-editor/src/components/copy-handler/index.js"],"names":["CopyHandler","children","onCopy","onCut","dispatch","ownProps","select","getBlocksByClientId","getSelectedBlockClientIds","hasMultiSelection","removeBlocks","event","selectedBlockClientIds","length","serialized","clipboardData","setData","preventDefault"],"mappings":";;;;;;;;;AAGA;;AACA;;AACA;;AACA;;AANA;;;AAQA,SAASA,WAAT,OAAoD;AAAA,MAA5BC,QAA4B,QAA5BA,QAA4B;AAAA,MAAlBC,MAAkB,QAAlBA,MAAkB;AAAA,MAAVC,KAAU,QAAVA,KAAU;AACnD,SACC;AAAK,IAAA,MAAM,EAAGD,MAAd;AAAuB,IAAA,KAAK,EAAGC;AAA/B,KACGF,QADH,CADD;AAKA;;eAEc,sBAAS,CACvB,wBAAc,UAAEG,QAAF,EAAYC,QAAZ,SAAsC;AAAA,MAAdC,MAAc,SAAdA,MAAc;;AAAA,gBAK/CA,MAAM,CAAE,mBAAF,CALyC;AAAA,MAElDC,mBAFkD,WAElDA,mBAFkD;AAAA,MAGlDC,yBAHkD,WAGlDA,yBAHkD;AAAA,MAIlDC,iBAJkD,WAIlDA,iBAJkD;;AAAA,kBAM1BL,QAAQ,CAAE,mBAAF,CANkB;AAAA,MAM3CM,YAN2C,aAM3CA,YAN2C;;AAQnD,MAAMR,MAAM,GAAG,SAATA,MAAS,CAAES,KAAF,EAAa;AAC3B,QAAMC,sBAAsB,GAAGJ,yBAAyB,EAAxD;;AAEA,QAAKI,sBAAsB,CAACC,MAAvB,KAAkC,CAAvC,EAA2C;AAC1C;AACA,KAL0B,CAO3B;;;AACA,QAAK,CAAEJ,iBAAiB,EAAnB,IAAyB,gCAA9B,EAAuD;AACtD;AACA;;AAED,QAAMK,UAAU,GAAG,uBAAWP,mBAAmB,CAAEK,sBAAF,CAA9B,CAAnB;AAEAD,IAAAA,KAAK,CAACI,aAAN,CAAoBC,OAApB,CAA6B,YAA7B,EAA2CF,UAA3C;AACAH,IAAAA,KAAK,CAACI,aAAN,CAAoBC,OAApB,CAA6B,WAA7B,EAA0CF,UAA1C;AAEAH,IAAAA,KAAK,CAACM,cAAN;AACA,GAlBD;;AAoBA,SAAO;AACNf,IAAAA,MAAM,EAANA,MADM;AAENC,IAAAA,KAFM,iBAECQ,KAFD,EAES;AACdT,MAAAA,MAAM,CAAES,KAAF,CAAN;;AAEA,UAAKF,iBAAiB,EAAtB,EAA2B;AAC1B,YAAMG,sBAAsB,GAAGJ,yBAAyB,EAAxD;AAEAE,QAAAA,YAAY,CAAEE,sBAAF,CAAZ;AACA;AACD;AAVK,GAAP;AAYA,CAxCD,CADuB,CAAT,EA0CVZ,WA1CU,C","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { serialize } from '@wordpress/blocks';\nimport { documentHasSelection } from '@wordpress/dom';\nimport { withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction CopyHandler( { children, onCopy, onCut } ) {\n\treturn (\n\t\t<div onCopy={ onCopy } onCut={ onCut }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\tconst {\n\t\t\tgetBlocksByClientId,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t} = select( 'core/block-editor' );\n\t\tconst { removeBlocks } = dispatch( 'core/block-editor' );\n\n\t\tconst onCopy = ( event ) => {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Let native copy behaviour take over in input fields.\n\t\t\tif ( ! hasMultiSelection() && documentHasSelection() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst serialized = serialize( getBlocksByClientId( selectedBlockClientIds ) );\n\n\t\t\tevent.clipboardData.setData( 'text/plain', serialized );\n\t\t\tevent.clipboardData.setData( 'text/html', serialized );\n\n\t\t\tevent.preventDefault();\n\t\t};\n\n\t\treturn {\n\t\t\tonCopy,\n\t\t\tonCut( event ) {\n\t\t\t\tonCopy( event );\n\n\t\t\t\tif ( hasMultiSelection() ) {\n\t\t\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\t\t\tremoveBlocks( selectedBlockClientIds );\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( CopyHandler );\n"]}