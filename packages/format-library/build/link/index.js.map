{"version":3,"sources":["@wordpress/format-library/src/link/index.js"],"names":["name","link","title","tagName","className","attributes","url","target","edit","arguments","addLink","bind","stopAddingLink","onRemoveFormat","state","addingLink","props","value","onChange","text","type","setState","speak","isActive","activeAttributes","Component"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { withSpokenMessages } from '@wordpress/components';\nimport {\n\tgetTextContent,\n\tapplyFormat,\n\tremoveFormat,\n\tslice,\n} from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\nimport { RichTextToolbarButton, RichTextShortcut } from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport InlineLinkUI from './inline';\n\nconst name = 'core/link';\n\nexport const link = {\n\tname,\n\ttitle: __( 'Link' ),\n\ttagName: 'a',\n\tclassName: null,\n\tattributes: {\n\t\turl: 'href',\n\t\ttarget: 'target',\n\t},\n\tedit: withSpokenMessages( class LinkEdit extends Component {\n\t\tconstructor() {\n\t\t\tsuper( ...arguments );\n\n\t\t\tthis.addLink = this.addLink.bind( this );\n\t\t\tthis.stopAddingLink = this.stopAddingLink.bind( this );\n\t\t\tthis.onRemoveFormat = this.onRemoveFormat.bind( this );\n\t\t\tthis.state = {\n\t\t\t\taddingLink: false,\n\t\t\t};\n\t\t}\n\n\t\taddLink() {\n\t\t\tconst { value, onChange } = this.props;\n\t\t\tconst text = getTextContent( slice( value ) );\n\n\t\t\tif ( text && isURL( text ) ) {\n\t\t\t\tonChange( applyFormat( value, { type: name, attributes: { url: text } } ) );\n\t\t\t} else {\n\t\t\t\tthis.setState( { addingLink: true } );\n\t\t\t}\n\t\t}\n\n\t\tstopAddingLink() {\n\t\t\tthis.setState( { addingLink: false } );\n\t\t}\n\n\t\tonRemoveFormat() {\n\t\t\tconst { value, onChange, speak } = this.props;\n\n\t\t\tonChange( removeFormat( value, name ) );\n\t\t\tspeak( __( 'Link removed.' ), 'assertive' );\n\t\t}\n\n\t\trender() {\n\t\t\tconst { isActive, activeAttributes, value, onChange } = this.props;\n\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<RichTextShortcut\n\t\t\t\t\t\ttype=\"access\"\n\t\t\t\t\t\tcharacter=\"a\"\n\t\t\t\t\t\tonUse={ this.addLink }\n\t\t\t\t\t/>\n\t\t\t\t\t<RichTextShortcut\n\t\t\t\t\t\ttype=\"access\"\n\t\t\t\t\t\tcharacter=\"s\"\n\t\t\t\t\t\tonUse={ this.onRemoveFormat }\n\t\t\t\t\t/>\n\t\t\t\t\t<RichTextShortcut\n\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\tcharacter=\"k\"\n\t\t\t\t\t\tonUse={ this.addLink }\n\t\t\t\t\t/>\n\t\t\t\t\t<RichTextShortcut\n\t\t\t\t\t\ttype=\"primaryShift\"\n\t\t\t\t\t\tcharacter=\"k\"\n\t\t\t\t\t\tonUse={ this.onRemoveFormat }\n\t\t\t\t\t/>\n\t\t\t\t\t{ isActive && <RichTextToolbarButton\n\t\t\t\t\t\tname=\"link\"\n\t\t\t\t\t\ticon=\"editor-unlink\"\n\t\t\t\t\t\ttitle={ __( 'Unlink' ) }\n\t\t\t\t\t\tonClick={ this.onRemoveFormat }\n\t\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\t\tshortcutType=\"primaryShift\"\n\t\t\t\t\t\tshortcutCharacter=\"k\"\n\t\t\t\t\t/> }\n\t\t\t\t\t{ ! isActive && <RichTextToolbarButton\n\t\t\t\t\t\tname=\"link\"\n\t\t\t\t\t\ticon=\"admin-links\"\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\n\t\t\t\t\t\tonClick={ this.addLink }\n\t\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\t\tshortcutType=\"primary\"\n\t\t\t\t\t\tshortcutCharacter=\"k\"\n\t\t\t\t\t/> }\n\t\t\t\t\t<InlineLinkUI\n\t\t\t\t\t\taddingLink={ this.state.addingLink }\n\t\t\t\t\t\tstopAddingLink={ this.stopAddingLink }\n\t\t\t\t\t\tisActive={ isActive }\n\t\t\t\t\t\tactiveAttributes={ activeAttributes }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t} ),\n};\n"]}