{"version":3,"sources":["@wordpress/editor/src/hooks/default-autocompleters.js"],"names":["clone","once","addFilter","getDefaultBlockName","dispatch","blockAutocompleter","userAutocompleter","defaultAutocompleters","fetchReusableBlocks","__experimentalFetchReusableBlocks","setDefaultCompleters","completers","blockName","map","push"],"mappings":"AAAA;;;AAGA,SAASA,KAAT,EAAgBC,IAAhB,QAA4B,QAA5B;AAEA;;;;AAGA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,mBAAT,QAAoC,mBAApC;AACA,SAASC,QAAT,QAAyB,iBAAzB;AAEA;;;;AAGA,SAASC,kBAAT,EAA6BC,iBAA7B,QAAsD,eAAtD;AAEA,IAAMC,qBAAqB,GAAG,CAAED,iBAAF,CAA9B;AAEA,IAAME,mBAAmB,GAAGP,IAAI,CAAE;AAAA,SAAMG,QAAQ,CAAE,aAAF,CAAR,CAA0BK,iCAA1B,EAAN;AAAA,CAAF,CAAhC;;AAEA,SAASC,oBAAT,CAA+BC,UAA/B,EAA2CC,SAA3C,EAAuD;AACtD,MAAK,CAAED,UAAP,EAAoB;AACnB;AACAA,IAAAA,UAAU,GAAGJ,qBAAqB,CAACM,GAAtB,CAA2Bb,KAA3B,CAAb,CAFmB,CAGnB;;AACA,QAAKY,SAAS,KAAKT,mBAAmB,EAAtC,EAA2C;AAC1CQ,MAAAA,UAAU,CAACG,IAAX,CAAiBd,KAAK,CAAEK,kBAAF,CAAtB;AAEA;;;;;;;AAMAG,MAAAA,mBAAmB;AACnB;AACD;;AACD,SAAOG,UAAP;AACA;;AAEDT,SAAS,CACR,gCADQ,EAER,8CAFQ,EAGRQ,oBAHQ,CAAT","sourcesContent":["/**\n * External dependencies\n */\nimport { clone, once } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { blockAutocompleter, userAutocompleter } from '../components';\n\nconst defaultAutocompleters = [ userAutocompleter ];\n\nconst fetchReusableBlocks = once( () => dispatch( 'core/editor' ).__experimentalFetchReusableBlocks() );\n\nfunction setDefaultCompleters( completers, blockName ) {\n\tif ( ! completers ) {\n\t\t// Provide copies so filters may directly modify them.\n\t\tcompleters = defaultAutocompleters.map( clone );\n\t\t// Add blocks autocompleter for Paragraph block\n\t\tif ( blockName === getDefaultBlockName() ) {\n\t\t\tcompleters.push( clone( blockAutocompleter ) );\n\n\t\t\t/*\n\t\t\t * NOTE: This is a hack to help ensure reusable blocks are loaded\n\t\t\t * so they may be included in the block completer. It can be removed\n\t\t\t * once we have a way for completers to Promise options while\n\t\t\t * store-based data dependencies are being resolved.\n\t\t\t */\n\t\t\tfetchReusableBlocks();\n\t\t}\n\t}\n\treturn completers;\n}\n\naddFilter(\n\t'editor.Autocomplete.completers',\n\t'editor/autocompleters/set-default-completers',\n\tsetDefaultCompleters\n);\n"]}