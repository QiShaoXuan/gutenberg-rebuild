{"version":3,"sources":["@wordpress/editor/src/components/post-format/index.js"],"names":["find","get","includes","union","__","Button","SelectControl","withSelect","withDispatch","withInstanceId","compose","PostFormatCheck","POST_FORMATS","id","caption","PostFormat","onUpdatePostFormat","postFormat","supportedFormats","suggestedFormat","instanceId","postFormatSelectorId","formats","filter","format","suggestion","map","label","value","select","getEditedPostAttribute","getSuggestedPostFormat","themeSupports","getThemeSupports","dispatch","editPost"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { find, get, includes, union } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, SelectControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostFormatCheck from './check';\n\nexport const POST_FORMATS = [\n\t{ id: 'aside', caption: __( 'Aside' ) },\n\t{ id: 'gallery', caption: __( 'Gallery' ) },\n\t{ id: 'link', caption: __( 'Link' ) },\n\t{ id: 'image', caption: __( 'Image' ) },\n\t{ id: 'quote', caption: __( 'Quote' ) },\n\t{ id: 'standard', caption: __( 'Standard' ) },\n\t{ id: 'status', caption: __( 'Status' ) },\n\t{ id: 'video', caption: __( 'Video' ) },\n\t{ id: 'audio', caption: __( 'Audio' ) },\n\t{ id: 'chat', caption: __( 'Chat' ) },\n];\n\nfunction PostFormat( { onUpdatePostFormat, postFormat = 'standard', supportedFormats, suggestedFormat, instanceId } ) {\n\tconst postFormatSelectorId = 'post-format-selector-' + instanceId;\n\tconst formats = POST_FORMATS.filter( ( format ) => includes( supportedFormats, format.id ) );\n\tconst suggestion = find( formats, ( format ) => format.id === suggestedFormat );\n\n\t// Disable reason: We need to change the value immiediately to show/hide the suggestion if needed\n\n\t/* eslint-disable jsx-a11y/no-onchange */\n\treturn (\n\t\t<PostFormatCheck>\n\t\t\t<div className=\"editor-post-format\">\n\t\t\t\t<div className=\"editor-post-format__content\">\n\t\t\t\t\t<label htmlFor={ postFormatSelectorId }>{ __( 'Post Format' ) }</label>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tvalue={ postFormat }\n\t\t\t\t\t\tonChange={ ( format ) => onUpdatePostFormat( format ) }\n\t\t\t\t\t\tid={ postFormatSelectorId }\n\t\t\t\t\t\toptions={ formats.map( ( format ) => ( {\n\t\t\t\t\t\t\tlabel: format.caption,\n\t\t\t\t\t\t\tvalue: format.id,\n\t\t\t\t\t\t} ) ) }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{ suggestion && suggestion.id !== postFormat && (\n\t\t\t\t\t<div className=\"editor-post-format__suggestion\">\n\t\t\t\t\t\t{ __( 'Suggestion:' ) }{ ' ' }\n\t\t\t\t\t\t<Button isLink onClick={ () => onUpdatePostFormat( suggestion.id ) }>\n\t\t\t\t\t\t\t{ suggestion.caption }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</PostFormatCheck>\n\t);\n\t/* eslint-enable jsx-a11y/no-onchange */\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute, getSuggestedPostFormat } = select( 'core/editor' );\n\t\tconst postFormat = getEditedPostAttribute( 'format' );\n\t\tconst themeSupports = select( 'core' ).getThemeSupports();\n\t\t// Ensure current format is always in the set.\n\t\t// The current format may not be a format supported by the theme.\n\t\tconst supportedFormats = union( [ postFormat ], get( themeSupports, [ 'formats' ], [] ) );\n\t\treturn {\n\t\t\tpostFormat,\n\t\t\tsupportedFormats,\n\t\t\tsuggestedFormat: getSuggestedPostFormat(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdatePostFormat( postFormat ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { format: postFormat } );\n\t\t},\n\t} ) ),\n\twithInstanceId,\n] )( PostFormat );\n"]}