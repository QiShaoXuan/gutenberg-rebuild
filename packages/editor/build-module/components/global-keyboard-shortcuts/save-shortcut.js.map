{"version":3,"sources":["@wordpress/editor/src/components/global-keyboard-shortcuts/save-shortcut.js"],"names":["KeyboardShortcuts","rawShortcut","compose","withSelect","withDispatch","SaveShortcut","onSave","primary","event","preventDefault","select","isEditedPostDirty","isDirty","dispatch","ownProps","savePost"],"mappings":";;;AAAA;;;AAGA,SAASA,iBAAT,QAAkC,uBAAlC;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,iBAAzC;AAEA,OAAO,SAASC,YAAT,OAAoC;AAAA,MAAXC,MAAW,QAAXA,MAAW;AAC1C,SACC,cAAC,iBAAD;AACC,IAAA,UAAU,MADX;AAEC,IAAA,SAAS,sBACNL,WAAW,CAACM,OAAZ,CAAqB,GAArB,CADM,EACwB,UAAEC,KAAF,EAAa;AAC5CA,MAAAA,KAAK,CAACC,cAAN;AACAH,MAAAA,MAAM;AACN,KAJO;AAFV,IADD;AAWA;AAED,eAAeJ,OAAO,CAAE,CACvBC,UAAU,CAAE,UAAEO,MAAF,EAAc;AAAA,gBACKA,MAAM,CAAE,aAAF,CADX;AAAA,MACjBC,iBADiB,WACjBA,iBADiB;;AAGzB,SAAO;AACNC,IAAAA,OAAO,EAAED,iBAAiB;AADpB,GAAP;AAGA,CANS,CADa,EAQvBP,YAAY,CAAE,UAAES,QAAF,EAAYC,QAAZ,SAAsC;AAAA,MAAdJ,MAAc,SAAdA,MAAc;;AAAA,kBAC9BG,QAAQ,CAAE,aAAF,CADsB;AAAA,MAC3CE,QAD2C,aAC3CA,QAD2C;;AAGnD,SAAO;AACNT,IAAAA,MADM,oBACG;AACR;AACA;AACA;AACA;AACA;AALQ,qBAMsBI,MAAM,CAAE,aAAF,CAN5B;AAAA,UAMAC,iBANA,YAMAA,iBANA;;AAOR,UAAK,CAAEA,iBAAiB,EAAxB,EAA6B;AAC5B;AACA;;AAEDI,MAAAA,QAAQ;AACR;AAbK,GAAP;AAeA,CAlBW,CARW,CAAF,CAAP,CA2BVV,YA3BU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { KeyboardShortcuts } from '@wordpress/components';\nimport { rawShortcut } from '@wordpress/keycodes';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport function SaveShortcut( { onSave } ) {\n\treturn (\n\t\t<KeyboardShortcuts\n\t\t\tbindGlobal\n\t\t\tshortcuts={ {\n\t\t\t\t[ rawShortcut.primary( 's' ) ]: ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tonSave();\n\t\t\t\t},\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isEditedPostDirty } = select( 'core/editor' );\n\n\t\treturn {\n\t\t\tisDirty: isEditedPostDirty(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\tconst { savePost } = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonSave() {\n\t\t\t\t// TODO: This should be handled in the `savePost` effect in\n\t\t\t\t// considering `isSaveable`. See note on `isEditedPostSaveable`\n\t\t\t\t// selector about dirtiness and meta-boxes.\n\t\t\t\t//\n\t\t\t\t// See: `isEditedPostSaveable`\n\t\t\t\tconst { isEditedPostDirty } = select( 'core/editor' );\n\t\t\t\tif ( ! isEditedPostDirty() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsavePost();\n\t\t\t},\n\t\t};\n\t} ),\n] )( SaveShortcut );\n"]}