{"version":3,"sources":["@wordpress/editor/src/hooks/default-autocompleters.js"],"names":["defaultAutocompleters","userAutocompleter","fetchReusableBlocks","__experimentalFetchReusableBlocks","setDefaultCompleters","completers","blockName","map","clone","push","blockAutocompleter"],"mappings":";;AAGA;;AAKA;;AACA;;AACA;;AAKA;;AAfA;;;;AAKA;;;;AAOA;;;AAKA,IAAMA,qBAAqB,GAAG,CAAEC,6BAAF,CAA9B;AAEA,IAAMC,mBAAmB,GAAG,kBAAM;AAAA,SAAM,oBAAU,aAAV,EAA0BC,iCAA1B,EAAN;AAAA,CAAN,CAA5B;;AAEA,SAASC,oBAAT,CAA+BC,UAA/B,EAA2CC,SAA3C,EAAuD;AACtD,MAAK,CAAED,UAAP,EAAoB;AACnB;AACAA,IAAAA,UAAU,GAAGL,qBAAqB,CAACO,GAAtB,CAA2BC,aAA3B,CAAb,CAFmB,CAGnB;;AACA,QAAKF,SAAS,KAAK,kCAAnB,EAA2C;AAC1CD,MAAAA,UAAU,CAACI,IAAX,CAAiB,mBAAOC,8BAAP,CAAjB;AAEA;;;;;;;AAMAR,MAAAA,mBAAmB;AACnB;AACD;;AACD,SAAOG,UAAP;AACA;;AAED,sBACC,gCADD,EAEC,8CAFD,EAGCD,oBAHD","sourcesContent":["/**\n * External dependencies\n */\nimport { clone, once } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { blockAutocompleter, userAutocompleter } from '../components';\n\nconst defaultAutocompleters = [ userAutocompleter ];\n\nconst fetchReusableBlocks = once( () => dispatch( 'core/editor' ).__experimentalFetchReusableBlocks() );\n\nfunction setDefaultCompleters( completers, blockName ) {\n\tif ( ! completers ) {\n\t\t// Provide copies so filters may directly modify them.\n\t\tcompleters = defaultAutocompleters.map( clone );\n\t\t// Add blocks autocompleter for Paragraph block\n\t\tif ( blockName === getDefaultBlockName() ) {\n\t\t\tcompleters.push( clone( blockAutocompleter ) );\n\n\t\t\t/*\n\t\t\t * NOTE: This is a hack to help ensure reusable blocks are loaded\n\t\t\t * so they may be included in the block completer. It can be removed\n\t\t\t * once we have a way for completers to Promise options while\n\t\t\t * store-based data dependencies are being resolved.\n\t\t\t */\n\t\t\tfetchReusableBlocks();\n\t\t}\n\t}\n\treturn completers;\n}\n\naddFilter(\n\t'editor.Autocomplete.completers',\n\t'editor/autocompleters/set-default-completers',\n\tsetDefaultCompleters\n);\n"]}