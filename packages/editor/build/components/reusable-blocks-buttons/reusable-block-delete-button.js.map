{"version":3,"sources":["@wordpress/editor/src/components/reusable-blocks-buttons/reusable-block-delete-button.js"],"names":["ReusableBlockDeleteButton","isVisible","isDisabled","onDelete","select","clientId","getBlock","canUser","getReusableBlock","__experimentalGetReusableBlock","block","reusableBlock","attributes","ref","id","isTemporary","dispatch","onToggle","noop","deleteReusableBlock","__experimentalDeleteReusableBlock","hasConfirmed","window","confirm"],"mappings":";;;;;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAZA;;;;AAKA;;;AASO,SAASA,yBAAT,OAA0E;AAAA,MAApCC,SAAoC,QAApCA,SAAoC;AAAA,MAAzBC,UAAyB,QAAzBA,UAAyB;AAAA,MAAbC,QAAa,QAAbA,QAAa;;AAChF,MAAK,CAAEF,SAAP,EAAmB;AAClB,WAAO,IAAP;AACA;;AAED,SACC,4BAAC,oBAAD;AACC,IAAA,SAAS,EAAC,+EADX;AAEC,IAAA,IAAI,EAAC,IAFN;AAGC,IAAA,QAAQ,EAAGC,UAHZ;AAIC,IAAA,OAAO,EAAG;AAAA,aAAMC,QAAQ,EAAd;AAAA;AAJX,KAMG,cAAI,6BAAJ,CANH,CADD;AAUA;;eAEc,sBAAS,CACvB,sBAAY,UAAEC,MAAF,SAA4B;AAAA,MAAhBC,QAAgB,SAAhBA,QAAgB;;AAAA,gBAClBD,MAAM,CAAE,mBAAF,CADY;AAAA,MAC/BE,QAD+B,WAC/BA,QAD+B;;AAAA,iBAEnBF,MAAM,CAAE,MAAF,CAFa;AAAA,MAE/BG,OAF+B,YAE/BA,OAF+B;;AAAA,iBAGsBH,MAAM,CAAE,aAAF,CAH5B;AAAA,MAGCI,gBAHD,YAG/BC,8BAH+B;;AAIvC,MAAMC,KAAK,GAAGJ,QAAQ,CAAED,QAAF,CAAtB;AAEA,MAAMM,aAAa,GAAGD,KAAK,IAAI,6BAAiBA,KAAjB,CAAT,GACrBF,gBAAgB,CAAEE,KAAK,CAACE,UAAN,CAAiBC,GAAnB,CADK,GAErB,IAFD;AAIA,SAAO;AACNZ,IAAAA,SAAS,EAAE,CAAC,CAAEU,aAAH,IAAoB,CAAC,CAAEJ,OAAO,CAAE,QAAF,EAAY,QAAZ,EAAsBI,aAAa,CAACG,EAApC,CADnC;AAENZ,IAAAA,UAAU,EAAES,aAAa,IAAIA,aAAa,CAACI;AAFrC,GAAP;AAIA,CAdD,CADuB,EAgBvB,wBAAc,UAAEC,QAAF,gBAA2D;AAAA,MAA7CX,QAA6C,SAA7CA,QAA6C;AAAA,6BAAnCY,QAAmC;AAAA,MAAnCA,QAAmC,+BAAxBC,YAAwB;AAAA,MAAdd,MAAc,SAAdA,MAAc;;AAAA,kBAGpEY,QAAQ,CAAE,aAAF,CAH4D;AAAA,MAEpCG,mBAFoC,aAEvEC,iCAFuE;;AAAA,iBAInDhB,MAAM,CAAE,mBAAF,CAJ6C;AAAA,MAIhEE,QAJgE,YAIhEA,QAJgE;;AAMxE,SAAO;AACNH,IAAAA,QADM,sBACK;AACV;AACA;AACA,UAAMkB,YAAY,GAAGC,MAAM,CAACC,OAAP,CAAgB,cACpC,6DACA,sEAFoC,CAAhB,CAArB;;AAKA,UAAKF,YAAL,EAAoB;AACnB,YAAMX,KAAK,GAAGJ,QAAQ,CAAED,QAAF,CAAtB;AACAc,QAAAA,mBAAmB,CAAET,KAAK,CAACE,UAAN,CAAiBC,GAAnB,CAAnB;AACAI,QAAAA,QAAQ;AACR;AACD;AAdK,GAAP;AAgBA,CAtBD,CAhBuB,CAAT,EAuCVjB,yBAvCU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { isReusableBlock } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport function ReusableBlockDeleteButton( { isVisible, isDisabled, onDelete } ) {\n\tif ( ! isVisible ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName=\"editor-block-settings-menu__control block-editor-block-settings-menu__control\"\n\t\t\ticon=\"no\"\n\t\t\tdisabled={ isDisabled }\n\t\t\tonClick={ () => onDelete() }\n\t\t>\n\t\t\t{ __( 'Remove from Reusable Blocks' ) }\n\t\t</MenuItem>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock } = select( 'core/block-editor' );\n\t\tconst { canUser } = select( 'core' );\n\t\tconst { __experimentalGetReusableBlock: getReusableBlock } = select( 'core/editor' );\n\t\tconst block = getBlock( clientId );\n\n\t\tconst reusableBlock = block && isReusableBlock( block ) ?\n\t\t\tgetReusableBlock( block.attributes.ref ) :\n\t\t\tnull;\n\n\t\treturn {\n\t\t\tisVisible: !! reusableBlock && !! canUser( 'delete', 'blocks', reusableBlock.id ),\n\t\t\tisDisabled: reusableBlock && reusableBlock.isTemporary,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId, onToggle = noop }, { select } ) => {\n\t\tconst {\n\t\t\t__experimentalDeleteReusableBlock: deleteReusableBlock,\n\t\t} = dispatch( 'core/editor' );\n\t\tconst { getBlock } = select( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tonDelete() {\n\t\t\t\t// TODO: Make this a <Confirm /> component or similar\n\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\tconst hasConfirmed = window.confirm( __(\n\t\t\t\t\t'Are you sure you want to delete this Reusable Block?\\n\\n' +\n\t\t\t\t\t'It will be permanently removed from all posts and pages that use it.'\n\t\t\t\t) );\n\n\t\t\t\tif ( hasConfirmed ) {\n\t\t\t\t\tconst block = getBlock( clientId );\n\t\t\t\t\tdeleteReusableBlock( block.attributes.ref );\n\t\t\t\t\tonToggle();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( ReusableBlockDeleteButton );\n"]}