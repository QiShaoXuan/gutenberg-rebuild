{"version":3,"sources":["@wordpress/docgen/src/markdown/formatter.js"],"names":["getTagsByName","tags","names","filter","tag","some","name","title","cleanSpaces","paragraph","split","map","sentence","trim","reduce","acc","current","formatTag","formatter","docs","length","push","formatExamples","description","join","formatDeprecated","formatDescription","getHeading","index","text","repeat","getSymbolHeading","module","exports","rootDir","docPath","symbols","headingTitle","headingStartIndex","headingIndex","sort","first","second","firstName","toUpperCase","secondName","forEach","symbol","type","pop"],"mappings":"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","sourcesContent":["const getTagsByName = ( tags, ...names ) => tags.filter( ( tag ) => names.some( ( name ) => name === tag.title ) );\n\nconst cleanSpaces = ( paragraph ) =>\n\tparagraph ?\n\t\tparagraph.split( '\\n' ).map(\n\t\t\t( sentence ) => sentence.trim()\n\t\t).reduce(\n\t\t\t( acc, current ) => acc + ' ' + current,\n\t\t\t''\n\t\t).trim() :\n\t\t'';\n\nconst formatTag = ( title, tags, formatter, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( `*${ title }*` );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( ...tags.map( formatter ) );\n\t}\n};\n\nconst formatExamples = ( tags, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '*Usage*' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( ...tags.map(\n\t\t\t( tag ) => `${ tag.description }`\n\t\t).join( '\\n\\n' ) );\n\t}\n};\n\nconst formatDeprecated = ( tags, docs ) => {\n\tif ( tags && tags.length > 0 ) {\n\t\tdocs.push( '\\n' );\n\t\tdocs.push( ...tags.map(\n\t\t\t( tag ) => `\\n> **Deprecated** ${ cleanSpaces( tag.description ) }`\n\t\t) );\n\t}\n};\n\nconst formatDescription = ( description, docs ) => {\n\tdocs.push( '\\n' );\n\tdocs.push( '\\n' );\n\tdocs.push( description );\n};\n\nconst getHeading = ( index, text ) => {\n\treturn '#'.repeat( index ) + ' ' + text;\n};\n\nconst getSymbolHeading = ( text ) => {\n\treturn `<a name=\"${ text }\" href=\"#${ text }\">#</a> **${ text }**`;\n};\n\nmodule.exports = function( rootDir, docPath, symbols, headingTitle, headingStartIndex ) {\n\tconst docs = [ ];\n\tlet headingIndex = headingStartIndex || 1;\n\tif ( headingTitle ) {\n\t\tdocs.push( getHeading( headingIndex, `${ headingTitle }` ) );\n\t\theadingIndex++;\n\t}\n\tdocs.push( '\\n' );\n\tdocs.push( '\\n' );\n\tsymbols.sort( ( first, second ) => {\n\t\tconst firstName = first.name.toUpperCase();\n\t\tconst secondName = second.name.toUpperCase();\n\t\tif ( firstName < secondName ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( firstName > secondName ) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t} );\n\tif ( symbols && symbols.length > 0 ) {\n\t\tsymbols.forEach( ( symbol ) => {\n\t\t\tdocs.push( getSymbolHeading( symbol.name ) );\n\t\t\tformatDeprecated( getTagsByName( symbol.tags, 'deprecated' ), docs );\n\t\t\tformatDescription( symbol.description, docs );\n\t\t\tformatTag(\n\t\t\t\t'Related',\n\t\t\t\tgetTagsByName( symbol.tags, 'see', 'link' ),\n\t\t\t\t( tag ) => `\\n- ${ tag.description }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatExamples( getTagsByName( symbol.tags, 'example' ), docs );\n\t\t\tformatTag(\n\t\t\t\t'Type',\n\t\t\t\tgetTagsByName( symbol.tags, 'type' ),\n\t\t\t\t( tag ) => `\\n- \\`${ tag.type }\\` ${ cleanSpaces( tag.description ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Parameters',\n\t\t\t\tgetTagsByName( symbol.tags, 'param' ),\n\t\t\t\t( tag ) => `\\n- *${ tag.name }* \\`${ tag.type }\\`: ${ cleanSpaces( tag.description ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tformatTag(\n\t\t\t\t'Returns',\n\t\t\t\tgetTagsByName( symbol.tags, 'return' ),\n\t\t\t\t( tag ) => `\\n- \\`${ tag.type }\\`: ${ cleanSpaces( tag.description ) }`,\n\t\t\t\tdocs\n\t\t\t);\n\t\t\tdocs.push( '\\n' );\n\t\t\tdocs.push( '\\n' );\n\t\t} );\n\t\tdocs.pop(); // remove last \\n, we want one blank line at the end of the file.\n\t} else {\n\t\tdocs.push( 'Nothing to document.' );\n\t\tdocs.push( '\\n' );\n\t}\n\treturn docs.join( '' );\n};\n"]}